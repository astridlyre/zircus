function t(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function e(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,s(t,e,"get"))}function i(t,e,i){return function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}(t,s(t,e,"set"),i),i}function s(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}function a(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}let n;const r="production"===(window.location.hostname.includes("zircus")?"production":"development")?"https://zircus.herokuapp.com/api":"http://localhost:3000/api";var o=new WeakMap;const l=new class{constructor(){o.set(this,{writable:!0,value:void 0}),i(this,o,new Map)}addEventListener(t,i){e(this,o).set(t,(e(this,o).get(t)||new Set).add(i))}dispatchEvent(t){var i;null===(i=e(this,o).get(t.type))||void 0===i||i.forEach((e=>e(t)))}};var d=new WeakMap,c=new WeakMap,h=new WeakSet;function u(t,i){e(this,d)[t]=i,localStorage.setItem("state",JSON.stringify(e(this,d)))}const p=new class{constructor(){h.add(this),d.set(this,{writable:!0,value:void 0}),c.set(this,{writable:!0,value:void 0}),i(this,d,JSON.parse(localStorage.getItem("state"))||{}),i(this,c,e(this,d).lastUpdated),(!e(this,c)||Date.now()-e(this,c)>864e5)&&(localStorage.clear(),a(this,h,u).call(this,"lastUpdated",Date.now()))}get COUNTRIES_UPDATED_EVENT(){return"state-countries-updated"}get countries(){return e(this,d).countries||[]}set countries(t){a(this,h,u).call(this,"countries",t(this.countries)),l.dispatchEvent(new CustomEvent(this.COUNTRIES_UPDATED_EVENT))}get secret(){return e(this,d).secret||null}set secret(t){a(this,h,u).call(this,"secret",t)}get order(){return e(this,d).order||null}set order(t){a(this,h,u).call(this,"order",t)}};class m{constructor(t,e,i){this.e=document.createElement(t),this.children=[],e&&Array.isArray(e)?e.forEach((t=>{this.e.classList.add(t)})):e&&"string"==typeof e&&this.e.classList.add(e),i&&Object.entries(i).forEach((([t,e])=>this.e.setAttribute(t,e)))}render(){return this.children.forEach((t=>{t instanceof m?this.e.appendChild(t.render()):this.e.textContent=t})),this.e}event(t,e){return this.e.addEventListener(t,e),this}addChild(t){return this.children.push(t),this}}function g(t,e=new DocumentFragment,i=document.head){return t.forEach((t=>{e.appendChild(new m("link",null,{href:t,rel:"prefetch",as:"image"}).render())})),i.appendChild(e)}function v(t,e){return Object.entries(e).forEach((([e,i])=>t.setAttribute(e,i))),t}function M(t){return"string"==typeof t?t=[new m("span",["notification__prefix","green"]).addChild("!").render(),new m("p","notification__text").addChild(t).render()]:t instanceof m&&(t=[t]),l.dispatchEvent(new CustomEvent("notification",{detail:{content:t}}))}function w(t){return l.dispatchEvent(new CustomEvent("notification",{detail:{content:[new m("span",["notification__prefix","red"]).addChild("!").render(),new m("p",["notification__text"]).addChild(t).render()]}}))}function y(){return document.documentElement.getAttribute("lang")}function b(t){return t[y()]}function E(t){return new Intl.NumberFormat(`${y()}-CA`,{style:"currency",currency:"CAD"}).format(t)}const f={Canada:{states:[{id:872,name:"Alberta",state_code:"AB"},{id:875,name:"British Columbia",state_code:"BC"},{id:867,name:"Manitoba",state_code:"MB"},{id:868,name:"New Brunswick",state_code:"NB"},{id:877,name:"Newfoundland and Labrador",state_code:"NL"},{id:878,name:"Northwest Territories",state_code:"NT"},{id:874,name:"Nova Scotia",state_code:"NS"},{id:876,name:"Nunavut",state_code:"NU"},{id:866,name:"Ontario",state_code:"ON"},{id:871,name:"Prince Edward Island",state_code:"PE"},{id:873,name:"Quebec",state_code:"QC"},{id:870,name:"Saskatchewan",state_code:"SK"},{id:869,name:"Yukon",state_code:"YT"}]},"United States":{states:[{id:1456,name:"Alabama",state_code:"AL"},{id:1400,name:"Alaska",state_code:"AK"},{id:1424,name:"American Samoa",state_code:"AS"},{id:1434,name:"Arizona",state_code:"AZ"},{id:1444,name:"Arkansas",state_code:"AR"},{id:1402,name:"Baker Island",state_code:"UM-81"},{id:1416,name:"California",state_code:"CA"},{id:1450,name:"Colorado",state_code:"CO"},{id:1435,name:"Connecticut",state_code:"CT"},{id:1399,name:"Delaware",state_code:"DE"},{id:1437,name:"District of Columbia",state_code:"DC"},{id:1436,name:"Florida",state_code:"FL"},{id:1455,name:"Georgia",state_code:"GA"},{id:1412,name:"Guam",state_code:"GU"},{id:1411,name:"Hawaii",state_code:"HI"},{id:1398,name:"Howland Island",state_code:"UM-84"},{id:1460,name:"Idaho",state_code:"ID"},{id:1425,name:"Illinois",state_code:"IL"},{id:1440,name:"Indiana",state_code:"IN"},{id:1459,name:"Iowa",state_code:"IA"},{id:1410,name:"Jarvis Island",state_code:"UM-86"},{id:1428,name:"Johnston Atoll",state_code:"UM-67"},{id:1406,name:"Kansas",state_code:"KS"},{id:1419,name:"Kentucky",state_code:"KY"},{id:1403,name:"Kingman Reef",state_code:"UM-89"},{id:1457,name:"Louisiana",state_code:"LA"},{id:1453,name:"Maine",state_code:"ME"},{id:1401,name:"Maryland",state_code:"MD"},{id:1433,name:"Massachusetts",state_code:"MA"},{id:1426,name:"Michigan",state_code:"MI"},{id:1438,name:"Midway Atoll",state_code:"UM-71"},{id:1420,name:"Minnesota",state_code:"MN"},{id:1430,name:"Mississippi",state_code:"MS"},{id:1451,name:"Missouri",state_code:"MO"},{id:1446,name:"Montana",state_code:"MT"},{id:1439,name:"Navassa Island",state_code:"UM-76"},{id:1408,name:"Nebraska",state_code:"NE"},{id:1458,name:"Nevada",state_code:"NV"},{id:1404,name:"New Hampshire",state_code:"NH"},{id:1417,name:"New Jersey",state_code:"NJ"},{id:1423,name:"New Mexico",state_code:"NM"},{id:1452,name:"New York",state_code:"NY"},{id:1447,name:"North Carolina",state_code:"NC"},{id:1418,name:"North Dakota",state_code:"ND"},{id:1431,name:"Northern Mariana Islands",state_code:"MP"},{id:4851,name:"Ohio",state_code:"OH"},{id:1421,name:"Oklahoma",state_code:"OK"},{id:1415,name:"Oregon",state_code:"OR"},{id:1448,name:"Palmyra Atoll",state_code:"UM-95"},{id:1422,name:"Pennsylvania",state_code:"PA"},{id:1449,name:"Puerto Rico",state_code:"PR"},{id:1461,name:"Rhode Island",state_code:"RI"},{id:1443,name:"South Carolina",state_code:"SC"},{id:1445,name:"South Dakota",state_code:"SD"},{id:1454,name:"Tennessee",state_code:"TN"},{id:1407,name:"Texas",state_code:"TX"},{id:1432,name:"United States Minor Outlying Islands",state_code:"UM"},{id:1413,name:"United States Virgin Islands",state_code:"VI"},{id:1414,name:"Utah",state_code:"UT"},{id:1409,name:"Vermont",state_code:"VT"},{id:1427,name:"Virginia",state_code:"VA"},{id:1405,name:"Wake Island",state_code:"UM-79"},{id:1462,name:"Washington",state_code:"WA"},{id:1429,name:"West Virginia",state_code:"WV"},{id:1441,name:"Wisconsin",state_code:"WI"},{id:1442,name:"Wyoming",state_code:"WY"}]}};async function k(t){return t.headers.has("content-type")&&t.headers.get("content-type").includes("application/json")?Promise.resolve(await t.json()):Promise.reject(`Data is not JSON: ${await t.text()}`)}function A(t){return new Promise(((e,i)=>{t.error?i(t.error):e(t)}))}p.countries=()=>f;var I=new WeakMap,z=new WeakMap,C=new WeakMap;n=Symbol.iterator;class L{constructor(s=1,a=1,r=1){I.set(this,{writable:!0,value:void 0}),z.set(this,{writable:!0,value:void 0}),C.set(this,{writable:!0,value:void 0}),t(this,n,(function*(t=(e(this,C)>0?e(this,I):e(this,z))){const i=t=>e(this,C)>0?t<e(this,z):t>e(this,I);for(;i(t);)yield t+=e(this,C)})),i(this,I,s),i(this,z,a),i(this,C,r)}normalize(t){return t>e(this,z)?e(this,z):t<e(this,I)?e(this,I):t}includes(t){return t>=e(this,I)&&t<=e(this,z)}get min(){return e(this,I)}get max(){return e(this,z)}}function N(t){return`${t[0].toUpperCase()}${t.substring(1).toLowerCase()}`}var S=new WeakMap,x=new WeakMap,D=new WeakMap,T=new WeakMap,j=new WeakMap,_=new WeakMap,W=new WeakMap,q=new WeakMap,O=new WeakMap;class $ extends HTMLElement{constructor(...t){super(...t),S.set(this,{writable:!0,value:void 0}),x.set(this,{writable:!0,value:void 0}),D.set(this,{writable:!0,value:void 0}),T.set(this,{writable:!0,value:void 0}),j.set(this,{writable:!0,value:void 0}),_.set(this,{writable:!0,value:void 0}),W.set(this,{writable:!0,value:void 0}),q.set(this,{writable:!0,value:void 0}),O.set(this,{writable:!0,value:void 0})}connectedCallback(){i(this,S,new m("div","modal__container").render()),i(this,q,this.querySelector("template")),this.appendChild(e(this,S)),l.addEventListener($.SHOW_MODAL_EVENT,(t=>requestAnimationFrame((()=>{this.show(t.detail),i(this,O,function(){let t=[document.querySelector("zircus-to-top-button"),document.querySelector("zircus-skip-button")];[document.querySelector("#blur"),document.querySelector("zircus-desktop-menu"),document.querySelector("zircus-mobile-menu"),document.querySelector(".footer__container")].forEach((e=>{t=t.concat([...e.querySelectorAll("textarea"),...e.querySelectorAll("input"),...e.querySelectorAll("button"),...e.querySelectorAll("select"),...e.querySelectorAll("a")])}));for(let e=0;e<t.length;e++)t[e].setAttribute("tabindex",-1);return()=>{for(let e=0;e<t.length;e++)t[e].removeAttribute("tabindex")}}())})))),l.addEventListener($.CLOSE_MODAL_EVENT,(()=>this.hide())),l.addEventListener($.CHANGE_MODAL_EVENT,(t=>this.setStatus(t.detail)))}setStatus({isActive:t=!0,isSpinning:i=!1,okText:s,okTitle:a,cancelText:n,cancelTitle:r}){return requestAnimationFrame((()=>{s&&(e(this,x).textContent=s),a&&e(this,D).setAttribute("title",a),n&&(e(this,T).textContent=n),r&&e(this,T).setAttribute("title",r),i?(e(this,x).classList.add("hidden"),e(this,W).classList.remove("hidden")):i||(e(this,x).classList.remove("hidden"),e(this,W).classList.add("hidden")),e(this,D).disabled=!t}))}hide(){requestAnimationFrame((()=>{"function"==typeof e(this,O)&&e(this,O).call(this),e(this,S).textContent="",document.getElementById("blur").classList.remove("blur"),document.getElementById("nav").classList.remove("blur"),document.body.classList.remove("hide-y"),this.classList.add("hidden")}))}show({content:t,ok:s,heading:a,cancel:n}){const r=e(this,q).content.cloneNode(!0);i(this,_,r.querySelector("#modal-heading")),i(this,j,r.querySelector("#modal-content")),i(this,D,r.querySelector("#modal-ok")),i(this,x,r.querySelector("#modal-button-text")),i(this,T,r.querySelector("#modal-cancel")),i(this,W,r.querySelector("#modal-spinner")),e(this,_).textContent=a,e(this,_).setAttribute("aria-hidden",!1),"string"==typeof t?e(this,j).appendChild(new m("p","modal__text").addChild(t).render()):(t instanceof HTMLElement||t instanceof DocumentFragment)&&e(this,j).appendChild(t),e(this,x).textContent=s.text,v(e(this,D),{title:s.title,"aria-hidden":!1}),e(this,D).addEventListener("click",s.action),document.getElementById("blur").classList.add("blur"),document.getElementById("nav").classList.add("blur"),document.body.classList.add("hide-y"),this.classList.remove("hidden"),e(this,S).appendChild(r),n?(e(this,D).classList.add("grow"),e(this,T).classList.replace("hidden","grow"),e(this,T).textContent=n.text,v(e(this,T),{title:n.title,"aria-hidden":!1}),e(this,T).addEventListener("click",n.action),e(this,T).focus()):e(this,D).focus()}static get SHOW_MODAL_EVENT(){return"show-modal"}static get CLOSE_MODAL_EVENT(){return"close-modal"}static get CHANGE_MODAL_EVENT(){return"change-modal"}static close(){l.dispatchEvent(new CustomEvent($.CLOSE_MODAL_EVENT))}static show(t){l.dispatchEvent(new CustomEvent($.SHOW_MODAL_EVENT,{detail:t}))}static setStatus(t){l.dispatchEvent(new CustomEvent($.CHANGE_MODAL_EVENT,{detail:t}))}}customElements.get("zircus-modal")||customElements.define("zircus-modal",$);var P=new WeakMap,H=new WeakMap,B=new WeakMap,U=new WeakMap;class Q extends HTMLElement{constructor(...t){super(...t),P.set(this,{writable:!0,value:null}),H.set(this,{writable:!0,value:void 0}),B.set(this,{writable:!0,value:void 0}),U.set(this,{writable:!0,value:void 0})}connectedCallback(){i(this,H,this.querySelector("#notification")),i(this,B,this.querySelector("#notification-content")),i(this,U,this.querySelector("#notification-close")),e(this,U).addEventListener("click",(()=>this.clear())),this.addEventListener("pointerenter",(()=>e(this,P)&&clearTimeout(e(this,P).id))),this.addEventListener("pointerout",(()=>e(this,P)&&(e(this,P).id=setTimeout((()=>this.clear()),4e3)))),l.addEventListener("notification",(({detail:t})=>(e(this,P)&&clearTimeout(e(this,P).id),this.clear(),this.show({content:t.content,id:setTimeout((()=>this.clear()),t.time||4e3)}))))}show({content:t,id:s}){return requestAnimationFrame((()=>{"string"==typeof t?e(this,B).appendChild(new m("p","notification__text").addChild(t).render()):Array.isArray(t)?t.forEach((t=>e(this,B).append(t))):e(this,B).textContent=t,e(this,H).classList.remove("hidden"),i(this,P,{content:t,id:s})}))}clear(){return requestAnimationFrame((()=>{e(this,B).textContent="",e(this,H).classList.add("hidden"),i(this,P,null)}))}}let F;customElements.get("zircus-notification")||customElements.define("zircus-notification",Q);var Y=new WeakMap,V=new WeakMap,Z=new WeakMap,R=new WeakMap,G=new WeakMap,J=new WeakMap,K=new WeakMap,X=new WeakMap,tt=new WeakMap;F=Symbol.iterator;class et{constructor({color:e,description:s,images:a,name:n,prefix:r,price:o,quantity:l,size:d,type:c}){Y.set(this,{writable:!0,value:void 0}),V.set(this,{writable:!0,value:void 0}),Z.set(this,{writable:!0,value:void 0}),R.set(this,{writable:!0,value:void 0}),G.set(this,{writable:!0,value:void 0}),J.set(this,{writable:!0,value:void 0}),K.set(this,{writable:!0,value:void 0}),X.set(this,{writable:!0,value:void 0}),tt.set(this,{writable:!0,value:void 0}),t(this,F,(function*(){for(const t of Object.entries(this.toJSON()))yield t})),i(this,Y,e),i(this,V,s),i(this,Z,a),i(this,R,n),i(this,G,r),i(this,J,o),i(this,K,l),i(this,X,d),i(this,tt,c)}get color(){return e(this,Y)}get description(){return e(this,V)}get images(){return{...e(this,Z)}}get name(){return e(this,R)}get prefix(){return e(this,G)}get price(){return e(this,J)}get quantity(){return e(this,K)}get size(){return e(this,X)}get type(){return e(this,tt)}toJSON(){return{color:this.color,description:this.description,images:this.images,name:this.name,prefix:this.prefix,price:this.price,quantity:this.quantity,size:this.size,type:this.type}}}var it=new WeakMap;const st=new class{constructor(){it.set(this,{writable:!0,value:void 0});const t=localStorage.getItem("inventory");i(this,it,t?JSON.parse(t).map((t=>new et(t))):[]),this.getInventory(),setInterval((()=>this.getInventory()),3e5)}async getInventory(){return await fetch(`${r}/inv`).then(k).then(A).then((t=>(i(this,it,t.map((t=>new et(t)))),this.save()))).catch((t=>w(`Unable to get inventory: ${t.message}`)))}find(t){return e(this,it).find((e=>e.type===t))}save(){localStorage.setItem("inventory",JSON.stringify(e(this,it))),l.dispatchEvent(new CustomEvent(this.INV_UPDATED_EVENT)),M("Inventory updated")}get length(){return e(this,it).length}get INV_UPDATED_EVENT(){return"inv-updated"}};let at;var nt=new WeakMap,rt=new WeakMap,ot=new WeakMap,lt=new WeakMap,dt=new WeakMap,ct=new WeakMap,ht=new WeakMap,ut=new WeakMap,pt=new WeakMap;at=Symbol.iterator;class mt{constructor({color:e,description:s,images:a,name:n,prefix:r,price:o,quantity:l,size:d,type:c}){nt.set(this,{writable:!0,value:void 0}),rt.set(this,{writable:!0,value:void 0}),ot.set(this,{writable:!0,value:void 0}),lt.set(this,{writable:!0,value:void 0}),dt.set(this,{writable:!0,value:void 0}),ct.set(this,{writable:!0,value:void 0}),ht.set(this,{writable:!0,value:void 0}),ut.set(this,{writable:!0,value:void 0}),pt.set(this,{writable:!0,value:void 0}),t(this,at,(function*(){for(const t of Object.entries(this.toJSON()))yield t})),i(this,nt,e),i(this,rt,s),i(this,ot,a),i(this,lt,n),i(this,dt,r),i(this,ct,o),i(this,ht,l),i(this,ut,d),i(this,pt,c)}get color(){return e(this,nt)}get description(){return e(this,rt)}get images(){return{...e(this,ot)}}get name(){return e(this,lt)}get prefix(){return e(this,dt)}get price(){return e(this,ct)}get quantity(){return e(this,ht)}get size(){return e(this,ut)}get type(){return e(this,pt)}get total(){return e(this,ct)*e(this,ht)}setQuantity(t){return i(this,ht,t),this}toJSON(){return{color:this.color,description:this.description,images:this.images,name:this.name,prefix:this.prefix,price:this.price,quantity:this.quantity,size:this.size,type:this.type,total:this.total}}}var gt=new WeakMap;const vt=new class{constructor(){gt.set(this,{writable:!0,value:void 0});const t=localStorage.getItem("cart");i(this,gt,t?JSON.parse(t).map((t=>new mt(t))):[])}get items(){return e(this,gt).slice()}get length(){return e(this,gt).reduce(((t,e)=>t+e.quantity),0)}get total(){return e(this,gt).reduce(((t,e)=>t+e.quantity*e.price),0)}add(t,s=1){return i(this,gt,e(this,gt).concat(new mt(st.find(t).toJSON()).setQuantity(s))),this.save()}update(t,s){return i(this,gt,e(this,gt).map((e=>e.type===t?s(e):e))),this.save()}remove(t){return i(this,gt,e(this,gt).filter((e=>e.type!==t))),this.save()}find(t){return e(this,gt).find((e=>e.type===t))}clear(){return i(this,gt,[]),this.save()}save(){return localStorage.setItem("cart",JSON.stringify(e(this,gt))),l.dispatchEvent(new CustomEvent(this.CART_UPDATED_EVENT)),this}get CART_UPDATED_EVENT(){return"cart-updated"}};class Mt extends Error{constructor(t){super(),this.name="NavigationError",this.message=t}}const wt=new Map;var yt=new WeakMap,bt=new WeakMap,Et=new WeakMap,ft=new WeakMap,kt=new WeakSet;class At extends HTMLElement{constructor(...t){super(...t),kt.add(this),yt.set(this,{writable:!0,value:void 0}),bt.set(this,{writable:!0,value:void 0}),Et.set(this,{writable:!0,value:!0}),ft.set(this,{writable:!0,value:void 0})}connectedCallback(){i(this,ft,new Worker("/assets/js/router/routerCacheWorker.js")),i(this,bt,y()),i(this,yt,this.querySelector("main")),window.addEventListener("popstate",(()=>{i(this,Et,!1),this.setAttribute("page",window.location.href)})),l.addEventListener("preload-mounted",(({detail:t})=>!this.cached(t)&&e(this,ft).postMessage({url:t}))),l.addEventListener(At.NAVIGATION_REQUEST,(({detail:t})=>this.setAttribute("page",t))),e(this,ft).onmessage=({data:t})=>t.ok?wt.set(t.url,t.text):w(t.error.message)}attributeChangedCallback(t,s,n){var r;s!==n&&("page"===t&&(a(this,kt,It).call(this,n),i(this,Et,!0),null===(r=e(this,yt))||void 0===r||r.focus()))}cached(t){return wt.get(t)}get page(){return this.getAttribute("page")}static get observedAttributes(){return["page"]}static get NAVIGATED_EVENT(){return"router-navigated"}static get NAVIGATION_REQUEST(){return"navigation-request"}static navigate(t){l.dispatchEvent(new CustomEvent(At.NAVIGATION_REQUEST,{detail:t}))}async loadPage(t,e=wt.get(t)){return e||await fetch(t,{method:"GET"}).then((t=>{if(!t.ok)throw new Mt("Network response was not ok");return t.text()})).then((e=>(wt.set(t,e),e))).catch((e=>{wt.delete(t),w(`Oops! ${e.message}`)}))}async changePage(){return await this.loadPage(window.location.href).then((t=>{const{wrapper:i,newContent:s,lang:a,title:n}=this.extractContent(t);return document.title=n,a===e(this,bt)?this.smallPageChange(s,this.querySelector("#blur")):this.bigPageChange(s,i.querySelector("#page"),a)})).catch((t=>{w(`Oops! Network error: ${t.message}`),history.back()}))}extractContent(t,e=document.createElement("div")){e.innerHTML=t;const i=e.querySelector("main");if(!i)throw new Mt("Prefetch failed");return{wrapper:e,newContent:i,lang:i.getAttribute("lang"),title:i.getAttribute("pagetitle")}}notifyChanged(t){return i(this,yt,t),l.dispatchEvent(new CustomEvent(At.NAVIGATED_EVENT)),window.scrollTo({top:0})}bigPageChange(t,e,s){return document.documentElement.setAttribute("lang",s),i(this,bt,s),requestAnimationFrame((()=>(this.replaceChild(e,this.querySelector("#page")),this.notifyChanged(t))))}smallPageChange(t,i){return requestAnimationFrame((()=>(i.replaceChild(t,e(this,yt)),this.notifyChanged(t))))}}function It(t){e(this,Et)&&history.pushState(null,null,t),this.changePage()}customElements.get("zircus-router")||customElements.define("zircus-router",At);var zt=new WeakMap,Ct=new WeakMap,Lt=new WeakMap,Nt=new WeakMap;class St extends HTMLElement{constructor(...t){super(...t),zt.set(this,{writable:!0,value:void 0}),Ct.set(this,{writable:!0,value:void 0}),Lt.set(this,{writable:!0,value:void 0}),Nt.set(this,{writable:!0,value:void 0})}connectedCallback(){i(this,zt,this.querySelector("#cart-checkout")),i(this,Ct,this.querySelector("zircus-cart-totals")),i(this,Lt,this.querySelector("#cart-products")),i(this,Nt,this.querySelector("#cart-products-none")),this.renderCartProducts(),e(this,zt).addEventListener("click",(()=>At.navigate(this.getAttribute("checkoutpath")))),l.dispatchEvent(new CustomEvent("preload-mounted",{detail:b({en:"/checkout",fr:"/fr/la-caisse"})}))}disconnectedCallback(){e(this,zt).removeEventListener("click",(()=>At.navigate(this.getAttribute("checkoutpath"))))}updateStatus(){e(this,Ct).setAttribute("subtotal",vt.total),e(this,zt).disabled=vt.length<=0}renderCartProducts(){vt.length?requestAnimationFrame((()=>{const t=new DocumentFragment;e(this,Nt).classList.add("hidden"),vt.items.forEach((e=>{const i=new m("zircus-cart-product",null,{withactions:!0}).render();i.item=e,i.addEventListener("update-totals",(()=>this.updateStatus())),i.addEventListener("render",(()=>this.renderCartProducts())),t.appendChild(i)})),e(this,Lt).appendChild(t),this.updateStatus()})):requestAnimationFrame((()=>{e(this,Nt).classList.remove("hidden"),this.updateStatus()}))}}customElements.get("zircus-cart")||customElements.define("zircus-cart",St);const xt={cart:{removeNotificationText:t=>({en:`Removed ${t.name.en} from cart`,fr:`${t.name.fr} retiré du panier`}),removeButtonText:t=>({en:`Remove ${t.name.en} (size: ${t.size} quantity: ${t.quantity}) from cart`,fr:`Retirer ${t.name.fr} (taille: ${t.size} quantité: ${t.quantity}) du panier`})},checkout:{formText:{Canada:{en:["Province","Postal Code"],fr:["Province","Code postal"]},"United States":{en:["State","Zip"],fr:["État","Code postal"]}},modalText:{en:{okText:"go to shop",okTitle:"Visit the Zircus Shop",heading:"Empty cart",content:"No products in shopping cart. Why not add some?"},fr:{okText:"boutique",okTitle:"Visitez la boutique Zircus",heading:"Panier vide",content:"Aucun produit dans le panier d'achat. Pourquoi ne pas en ajouter?"}}},contactText:{en:{error:["Error","ok"],default:["Success","ok","Close modal","cancel","Cancel"],message:(t,e)=>`Thanks for your message, ${t}! We'll get back to you at ${e} as soon as possible.`},fr:{error:["Error","ok"],default:["Succès","ok","Fermer la fenêtre contextuelle","annuler","Annuler"],message:(t,e)=>`Merci pour votre message ${t}! Nous vous rappelleons à votre courriel ${e} dans les plus brefs délais.`}},redirect:{en:"Visit our site in English?",fr:"Visitez notre site en Français?"}},{removeButtonText:Dt,removeNotificationText:Tt}=xt.cart;var jt=new WeakMap,_t=new WeakMap,Wt=new WeakMap,qt=new WeakMap,Ot=new WeakMap,$t=new WeakMap,Pt=new WeakMap,Ht=new WeakMap,Bt=new WeakMap;class Ut extends HTMLElement{constructor(...t){super(...t),jt.set(this,{writable:!0,value:void 0}),_t.set(this,{writable:!0,value:void 0}),Wt.set(this,{writable:!0,value:void 0}),qt.set(this,{writable:!0,value:void 0}),Ot.set(this,{writable:!0,value:void 0}),$t.set(this,{writable:!0,value:void 0}),Pt.set(this,{writable:!0,value:void 0}),Ht.set(this,{writable:!0,value:void 0}),Bt.set(this,{writable:!0,value:void 0})}connectedCallback(){i(this,_t,document.getElementById("zircus-product-template").content.cloneNode(!0)),i(this,Wt,e(this,_t).querySelector("a")),i(this,qt,e(this,_t).querySelector("img")),i(this,Ot,e(this,_t).querySelector("p")),i(this,$t,e(this,_t).querySelector("span")),i(this,Pt,e(this,_t).querySelector(".input")),i(this,Ht,e(this,_t).querySelector("label")),i(this,Bt,e(this,_t).querySelector("button")),this.classList.add("cart__product"),v(e(this,Wt),{href:this.createLinkHref(this.item),title:this.name}),v(e(this,qt),{src:this.item.images.sm_a,alt:`${this.name} ${this.item.size} ${this.item.color} underwear`}),this.getAttribute("withactions")?this.addCartProductActions():e(this,Ot).textContent=`${this.name} (${this.item.size}) x${this.item.quantity}`,this.appendChild(e(this,_t))}get name(){return b(this.item.name)}get quantity(){return Number(e(this,Pt).value)}set item(t){i(this,jt,t)}get item(){return e(this,jt)}addCartProductActions(){e(this,Ot).textContent=`${this.name} (${this.item.size})`,e(this,$t).textContent=E(this.item.price*this.item.quantity),e(this,Ht).setAttribute("for",this.item.type),v(e(this,Pt),{value:this.item.quantity,id:this.item.type,name:`${this.name} ${this.item.size} ${this.item.color}`}),e(this,Pt).addEventListener("input",(t=>this.handleUpdateItemQuantity(t))),v(e(this,Bt),{title:b(Dt(this.item)),"aria-label":b(Dt(this.item))}),e(this,Bt).addEventListener("click",(()=>this.handleRemoveItem()))}handleUpdateItemQuantity(t){t.target.value=new L(1,st.find(this.item.type).quantity).normalize(this.quantity),vt.update(this.item.type,(t=>t.setQuantity(this.quantity))),e(this,$t).textContent=E(this.item.price*this.quantity),e(this,Bt).setAttribute("title",b(Dt(this.item.setQuantity(this.quantity)))),this.dispatchEvent(new CustomEvent("update-totals"))}handleRemoveItem(){vt.remove(this.item.type),M(this.createNotificationElements(e(this,Wt).href)),this.dispatchEvent(new CustomEvent("update-totals")),!vt.length&&this.dispatchEvent(new CustomEvent("render")),this.remove()}createLinkHref(t){return`/products/${t.name.en.toLowerCase().split(" ").join("-")}${"en"!==y()?`-${y()}`:""}.html?color=${this.item.color}&size=${this.item.size}`}createNotificationElements(t){return[new m("img","notification__image",{src:this.item.images.sm_a,alt:this.name}).render(),new m("zircus-router-link").addChild(new m("a","notification__text",{href:t,title:b({en:"Go to product page",fr:"Aller au page du produit"})}).addChild(b(Tt(this.item)))).render()]}}customElements.get("zircus-cart-product")||customElements.define("zircus-cart-product",Ut);var Qt=new WeakMap;class Ft extends HTMLElement{constructor(){super(),Qt.set(this,{writable:!0,value:void 0}),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=Yt.render(),i(this,Qt,Yt.mapDOM(this.shadowRoot))}attributeChangedCallback(t,i,s){t.endsWith("label")?e(this,Qt)[t].textContent=`${s}:`:e(this,Qt)[t].textContent=E(s)}static get observedAttributes(){return["subtotal-label","subtotal","shipping-label","shipping","tax-label","tax","total-label","total"]}}const Yt={render(){return`${this.html()}${this.css()}`},html:()=>'\n  <ul>\n    <li><span id="subtotal-label"></span><span id="subtotal"></span></li>\n    <li><span id="tax-label"></span><span id="tax"></span></li>\n    <li><span id="shipping-label"></span><span id="shipping"></span></li>\n    <li><span id="total-label"></span><span id="total"></span></li>\n  </ul>\n  ',css:()=>"\n<style>\n  :host {\n    margin-top: var(--base-spacing);\n    width: 100%;\n    display: flex;\n    justify-content: flex-end;\n    align-items: flex-end;\n    flex-grow: 1;\n  }\n  ul {\n    flex-basis: 12rem;\n    flex-grow: 1;\n    list-style: none;\n    padding: 0;\n    margin: 0;\n    font-size: var(--default-font-size);\n    line-height: var(--doc-line-height);\n    font-family: var(--site-font-family);\n  }\n\n  li {\n    display: flex;\n    justify-content: space-between;\n  }\n\n  #total-label, #total {\n    font-weight: 600;\n  }\n</style>\n  ",mapDOM:t=>({"subtotal-label":t.querySelector("#subtotal-label"),subtotal:t.querySelector("#subtotal"),"shipping-label":t.querySelector("#shipping-label"),shipping:t.querySelector("#shipping"),"tax-label":t.querySelector("#tax-label"),tax:t.querySelector("#tax"),"total-label":t.querySelector("#total-label"),total:t.querySelector("#total")})};function Vt(){return{updateCartLink(){return vt.length>0?this.cartLink.textContent=`${this.getAttribute("carttext")} (${vt.length})`:this.cartLink.textContent=this.getAttribute("carttext")}}}customElements.get("zircus-cart-totals")||customElements.define("zircus-cart-totals",Ft);var Zt,Rt,Gt=new WeakMap,Jt=new WeakMap,Kt=new WeakMap,Xt=new WeakMap,te=new WeakMap;class ee extends HTMLElement{constructor(...e){super(...e),Gt.set(this,{writable:!0,value:100}),Jt.set(this,{writable:!0,value:!1}),Kt.set(this,{writable:!0,value:!1}),Xt.set(this,{writable:!0,value:!1}),te.set(this,{writable:!0,value:void 0}),t(this,"cartLink",void 0)}connectedCallback(){i(this,te,this.querySelector("#nav")),this.cartLink=this.querySelector("#cart-link"),this.updateCartLink(),e(this,te).addEventListener("focusin",(()=>this.isFocused=!0)),e(this,te).addEventListener("focusout",(()=>this.isFocused=!1)),document.addEventListener("scroll",(()=>{this.scrollHandler(window.scrollY<e(this,Gt)||this.scrollState.next().value<=0)})),l.addEventListener(vt.CART_UPDATED_EVENT,(()=>this.updateCartLink())),l.addEventListener(At.NAVIGATED_EVENT,(()=>{this.isHidden=!1}))}get isFocused(){return e(this,Kt)}set isFocused(t){i(this,Kt,t),requestAnimationFrame((()=>e(this,Kt)||window.scrollY<e(this,Gt)?this.show():this.hide()))}get isHidden(){return e(this,Jt)}set isHidden(t){i(this,Xt,!0),i(this,Jt,t),requestAnimationFrame((()=>e(this,Jt)?this.hide():this.show()))}show(){document.querySelector("#nav").classList.remove("slide-up"),i(this,Xt,!1)}hide(){document.querySelector("#nav").classList.add("slide-up"),i(this,Xt,!1)}scrollHandler(t){if(!e(this,Xt))return t&&this.isHidden?this.isHidden=!1:t||this.isHidden?void 0:this.isHidden=!0}}Object.assign(ee.prototype,Vt(),(Zt=0,Rt=0,{scrollState:function*(){for(;;)[Zt,Rt]=[Rt,window.scrollY],yield Rt-Zt}()})),customElements.get("zircus-desktop-menu")||customElements.define("zircus-desktop-menu",ee);const ie={render(){return`${this.html()}\n            ${this.css()}`},html:()=>"\n    <button></button>\n    ",css:()=>"\n    <style>\n      button {\n        position: fixed;\n        top: -120%;\n        left: 0;\n        z-index: 1000;\n        border-bottom-right-radius: var(--radius);\n        background: var(--light);\n        color: var(--dark);\n        outline: none;\n        border: 2px solid transparent;\n        transition: all 0.1s ease-out;\n        padding: var(--base-unit) var(--base-spacing);\n        font-size: var(--small-font-size);\n        font-family: var(--site-font-family);\n        font-weight: 600;\n        letter-spacing: var(--letter-spacing);\n        box-shadow: var(--box-shadow-sm);\n      }\n\n      button:hover {\n        cursor: pointer;\n      }\n\n      button:focus {\n        top: 0;\n        transition: all 0.1s ease-out;\n        border-color: var(--teal);\n      }\n    </style>\n    "};var se=new WeakMap;class ae extends HTMLElement{constructor(){super(),se.set(this,{writable:!0,value:void 0}),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=ie.render(),i(this,se,this.shadowRoot.querySelector("button")),e(this,se).addEventListener("click",this.focusMain)}connectedCallback(){e(this,se).setAttribute("title",this.getAttribute("text")),e(this,se).textContent=this.getAttribute("text")}disconnectedCallback(){e(this,se).removeEventListener("click",this.focusMain)}focusMain(){document.getElementById("main-content").focus()}attributeChangedCallback(t,i,s){"tabindex"===t&&e(this,se).setAttribute("tabindex",s)}static get observedAttributes(){return["tabindex"]}}customElements.get("zircus-skip-button")||customElements.define("zircus-skip-button",ae);var ne=new WeakMap,re=new WeakMap,oe=new WeakMap;class le extends HTMLElement{constructor(...e){super(...e),t(this,"cartLink",void 0),ne.set(this,{writable:!0,value:void 0}),re.set(this,{writable:!0,value:void 0}),oe.set(this,{writable:!0,value:!0})}connectedCallback(){this.classList.add("nav_mobile"),this.cartLink=this.querySelector("#cart-link-mobile"),i(this,ne,this.querySelector("#menu-mobile-list")),i(this,re,this.querySelector("#menu-mobile-btn")),this.updateCartLink(),e(this,ne).addEventListener("click",(t=>this.isHidden=t.target===e(this,ne))),e(this,re).addEventListener("click",(()=>this.isHidden=!this.isHidden)),l.addEventListener(vt.CART_UPDATED_EVENT,(()=>this.updateCartLink())),l.addEventListener(At.NAVIGATED_EVENT,(()=>this.isHidden=!0))}set isHidden(t){i(this,oe,t),requestAnimationFrame((()=>e(this,oe)?this.hide():this.show()))}get isHidden(){return e(this,oe)}hide(){e(this,ne).classList.remove("show"),document.body.classList.remove("hide-y")}show(){e(this,ne).classList.add("show"),document.body.classList.add("hide-y")}}Object.assign(le.prototype,Vt()),customElements.get("zircus-mobile-menu")||customElements.define("zircus-mobile-menu",le);const de={render(){return`${this.html()}\n            ${this.css()}`},html:()=>'\n<button>\n  <svg\n    xmlns="http://www.w3.org/2000/svg"\n    viewBox="0 0 24 24"\n    fill="none"\n    stroke="currentColor"\n    stroke-width="2"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n    class="icon"\n  >\n    <polyline points="17 11 12 6 7 11"></polyline>\n    <polyline points="17 18 12 13 7 18"></polyline>\n  </svg>\n</button>',css:()=>"\n<style>\n  button {\n    opacity: 0.9;\n    padding: var(--base-unit);\n    transform: translateY(15px);\n    background: var(--gray-40);\n    visibility: hidden;\n    border: none;\n    border-radius: var(--radius);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: transform 0.2s ease-out;\n    position: fixed;\n    bottom: var(--base-spacing);\n    right: calc(var(--x-padding) - 0.6rem);\n    box-shadow: var(--box-shadow-sm);\n    z-index: 30;\n  }\n\n  @media screen and (min-width: 901px) {\n    button {\n      bottom: var(--md-spacing);\n      right: var(--md-spacing);\n    }\n  }\n\n  button:focus,\n  button:hover { opacity: 1; cursor: pointer; }\n  button:focus { outline-color: var(--teal); }\n  button.show {\n    visibility: unset;\n    transform: translateY(0);\n    transition: transform 0.2s ease-out;\n  }\n\n  svg {\n    animation: 3s infinite ease-out slowPulse;\n    height: 1.55rem;\n    width: 1.55rem;\n  }\n</style>"};var ce=new WeakMap,he=new WeakMap,ue=new WeakMap,pe=new WeakMap;class me extends HTMLElement{constructor(){super(),ce.set(this,{writable:!0,value:400}),he.set(this,{writable:!0,value:void 0}),ue.set(this,{writable:!0,value:!0}),pe.set(this,{writable:!0,value:!1}),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=de.render(),i(this,he,this.shadowRoot.querySelector("button")),e(this,he).addEventListener("click",(()=>{window.scroll({top:0}),e(this,he).blur()})),document.addEventListener("scroll",(()=>this.scrollHandler(window.scrollY>e(this,ce))))}get isHidden(){return e(this,ue)}set isHidden(t){i(this,ue,t),requestAnimationFrame((()=>e(this,ue)?this.hide():this.show()))}attributeChangedCallback(t,i,s){"tabindex"===t&&e(this,he).setAttribute("tabindex",s)}static get observedAttributes(){return["tabindex"]}show(){e(this,he).classList.add("show"),i(this,pe,!1)}hide(){e(this,he).classList.remove("show"),i(this,pe,!1)}scrollHandler(t){if(!e(this,pe))return i(this,pe,!0),t&&this.isHidden?this.isHidden=!1:t||this.isHidden?i(this,pe,!1):this.isHidden=!0}}customElements.get("zircus-to-top-button")||customElements.define("zircus-to-top-button",me);var ge=new WeakMap;class ve extends HTMLElement{constructor(...t){super(...t),ge.set(this,{writable:!0,value:void 0})}connectedCallback(){i(this,ge,new m("ul","lang__list").render()),e(this,ge).classList.add(this.getAttribute("type")),this.appendChild(e(this,ge)),this.renderLangLinks(),l.addEventListener(At.NAVIGATED_EVENT,(()=>{e(this,ge).textContent="",this.renderLangLinks()}))}renderLangLinks(){this.getAttribute("langs").split(",").map((t=>[t,document.querySelector("main").getAttribute(t)])).forEach((([t,i])=>{const s=document.createElement("li"),a=document.createElement("zircus-router-link");a.active=()=>y()===t;const n=new m("a",["small-spaced-bold","border-hover"],{href:i}).addChild(t);a.appendChild(n.render()),s.appendChild(a),e(this,ge).appendChild(s)})),this.appendChild(e(this,ge))}}customElements.get("zircus-lang-links")||customElements.define("zircus-lang-links",ve);var Me=new WeakMap,we=new WeakMap,ye=new WeakMap,be=new WeakMap,Ee=new WeakMap,fe=new WeakMap;class ke extends HTMLElement{constructor(...t){super(...t),Me.set(this,{writable:!0,value:void 0}),we.set(this,{writable:!0,value:void 0}),ye.set(this,{writable:!0,value:void 0}),be.set(this,{writable:!0,value:void 0}),Ee.set(this,{writable:!0,value:void 0}),fe.set(this,{writable:!0,value:void 0})}connectedCallback(){!vt.length&&this.showEmptyCartModal(),i(this,Me,this.querySelector("zircus-checkout-form")),i(this,we,this.querySelector("#checkout-state")),i(this,ye,this.querySelector("#checkout-country")),i(this,be,this.querySelector("zircus-cart-totals")),i(this,Ee,this.querySelector("zircus-shipping-inputs")),i(this,fe,this.querySelector("#checkout-products")),this.renderCartItems(),e(this,Me).addEventListener("country-changed",(()=>this.setTotals())),e(this,Me).addEventListener("state-changed",(()=>this.setTotals())),e(this,Me).addEventListener("form-filled",(()=>this.setTotals())),e(this,Me).addEventListener("form-not-filled",(()=>this.setTotals())),e(this,Ee).addEventListener("method-changed",(()=>this.setTotals())),e(this,Ee).addEventListener("mounted",(()=>this.setTotals()))}get taxTotal(){return vt.total*function(t,e){if("Canada"!==t)return.07;switch(e){case"New Brunswick":case"Newfoundland and Labrador":case"Nova Scotia":case"Prince Edward Island":return.15;case"Ontario":return.13;default:return.05}}(e(this,ye).value,e(this,we).value)}get total(){return vt.total+e(this,Ee).value.total+this.taxTotal}setTotals(){requestAnimationFrame((()=>{e(this,be).setAttribute("subtotal",vt.total),e(this,be).setAttribute("shipping",e(this,Ee).value.total),e(this,be).setAttribute("tax",this.taxTotal),e(this,be).setAttribute("total",this.total)}))}showEmptyCartModal(){return $.show({content:b(xt.checkout.modalText).content,heading:b(xt.checkout.modalText).heading,ok:{text:b(xt.checkout.modalText).okText,title:b(xt.checkout.modalText).okTitle,action:()=>{$.close(),At.navigate(b({en:"/shop",fr:"/fr/boutique"}))}}})}renderCartItems(t=new DocumentFragment){return requestAnimationFrame((()=>{vt.items.forEach((e=>{const i=document.createElement("zircus-cart-product");i.item=e,t.appendChild(i)})),e(this,fe).appendChild(t)}))}}let Ae;customElements.get("zircus-payment")||customElements.define("zircus-payment",ke);var Ie=new WeakMap,ze=new WeakMap,Ce=new WeakMap,Le=new WeakMap,Ne=new WeakMap,Se=new WeakMap,xe=new WeakMap,De=new WeakMap,Te=new WeakMap,je=new WeakMap,_e=new WeakMap,We=new WeakMap,qe=new WeakMap,Oe=new WeakMap,$e=new WeakMap,Pe=new WeakMap,He=new WeakMap,Be=new WeakMap,Ue=new WeakMap;Ae=Symbol.iterator;class Qe{constructor({address:e,breakdown:s=null,capture:a=null,createdOn:n=null,email:r,hasPaid:o=!1,hasShipped:l=!1,identifier:d=null,id:c=null,items:h=vt.items.map((t=>({type:t.type,quantity:t.quantity}))),name:u,orderId:p=null,paymentMethod:m,phone:g,shipping:v,subtotal:M=vt.total,total:w=null}){Ie.set(this,{writable:!0,value:void 0}),ze.set(this,{writable:!0,value:void 0}),Ce.set(this,{writable:!0,value:void 0}),Le.set(this,{writable:!0,value:void 0}),Ne.set(this,{writable:!0,value:void 0}),Se.set(this,{writable:!0,value:void 0}),xe.set(this,{writable:!0,value:void 0}),De.set(this,{writable:!0,value:void 0}),Te.set(this,{writable:!0,value:void 0}),je.set(this,{writable:!0,value:!1}),_e.set(this,{writable:!0,value:void 0}),We.set(this,{writable:!0,value:void 0}),qe.set(this,{writable:!0,value:void 0}),Oe.set(this,{writable:!0,value:void 0}),$e.set(this,{writable:!0,value:void 0}),Pe.set(this,{writable:!0,value:void 0}),He.set(this,{writable:!0,value:void 0}),Be.set(this,{writable:!0,value:void 0}),Ue.set(this,{writable:!0,value:void 0}),t(this,Ae,(function*(){for(const t of Object.entries(this.toJSON()))yield t})),i(this,Ie,e),i(this,ze,s),i(this,Ce,a),i(this,Le,n),i(this,Ne,r),i(this,xe,o),i(this,Se,l),i(this,Te,d),i(this,De,c),i(this,_e,h),i(this,We,u),i(this,qe,p),i(this,Oe,m),i(this,$e,g),i(this,Pe,y()),i(this,He,v),i(this,Be,M),i(this,Ue,w)}get address(){return{...e(this,Ie)}}get breakdown(){return{...e(this,ze)}}get capture(){return e(this,Ce)}get createdOn(){return e(this,Le)}get email(){return e(this,Ne)}get hasPaid(){return e(this,xe)}get hasShipped(){return e(this,Se)}get identifier(){return e(this,Te)}get id(){return e(this,De)}get items(){return e(this,_e).map((t=>({...t})))}get name(){return e(this,We)}get orderId(){return e(this,qe)}get paymentMethod(){return e(this,Oe)}get phone(){return e(this,$e)}get preferredLanguage(){return e(this,Pe)}get shipping(){return{...e(this,He)}}get subtotal(){return e(this,Be)}get total(){return e(this,Ue)}get isCompleted(){return e(this,je)}setCompleted(){return i(this,je,!0),this}toJSON(){return{address:this.address,breakdown:this.breakdown,capture:this.capture,createdOn:this.createdOn,email:this.email,hasPaid:this.hasPaid,hasShipped:this.hasShipped,identifier:this.identifier,id:this.id,isCompleted:this.isCompleted,items:this.items,name:this.name,orderId:this.orderId,paymentMethod:this.paymentMethod,phone:this.phone,preferredLanguage:this.preferredLanguage,shipping:this.shipping,subtotal:this.subtotal,total:this.total}}}const Fe=/^[A-Za-z][0-9][A-Za-z] ?[0-9][A-Za-z][0-9]$/,Ye=/^[0-9]{5}(-[0-9]{4})?$/,{formText:Ve}=xt.checkout;var Ze=new WeakMap,Re=new WeakMap,Ge=new WeakMap,Je=new WeakMap,Ke=new WeakMap,Xe=new WeakMap,ti=new WeakMap,ei=new WeakMap,ii=new WeakMap,si=new WeakMap,ai=new WeakMap,ni=new WeakMap,ri=new WeakMap,oi=new WeakMap,li=new WeakMap;class di extends HTMLElement{constructor(...t){super(...t),Ze.set(this,{writable:!0,value:!1}),Re.set(this,{writable:!0,value:void 0}),Ge.set(this,{writable:!0,value:void 0}),Je.set(this,{writable:!0,value:void 0}),Ke.set(this,{writable:!0,value:void 0}),Xe.set(this,{writable:!0,value:void 0}),ti.set(this,{writable:!0,value:void 0}),ei.set(this,{writable:!0,value:void 0}),ii.set(this,{writable:!0,value:void 0}),si.set(this,{writable:!0,value:void 0}),ai.set(this,{writable:!0,value:void 0}),ni.set(this,{writable:!0,value:void 0}),ri.set(this,{writable:!0,value:void 0}),oi.set(this,{writable:!0,value:void 0}),li.set(this,{writable:!0,value:void 0})}connectedCallback(){i(this,Re,this.querySelector("form")),i(this,Je,this.querySelector("#checkout-name")),i(this,Xe,this.querySelector("#checkout-email")),i(this,Ke,this.querySelector("#checkout-phone")),i(this,ti,this.querySelector("#checkout-address-line1")),i(this,ei,this.querySelector("#checkout-address-line2")),i(this,ai,this.querySelector("#checkout-city")),i(this,ii,this.querySelector("#checkout-postal-code")),i(this,si,this.querySelector("#checkout-postal-code-text")),i(this,ni,this.querySelector("#checkout-country")),i(this,ri,this.querySelector("#checkout-state")),i(this,oi,this.querySelector("#checkout-state-text")),i(this,li,this.querySelector("zircus-shipping-inputs")),i(this,Ge,[e(this,Je),e(this,Ke),e(this,Xe),e(this,ti),e(this,ei),e(this,ai),e(this,ri),e(this,ni),e(this,ii)]),this.handleCountryChange(),e(this,Je).addEventListener("input",this.titleCase),e(this,ti).addEventListener("input",this.titleCase),e(this,ei).addEventListener("input",this.titleCase),e(this,ai).addEventListener("input",this.titleCase),e(this,Ke).addEventListener("input",(t=>this.validatePhone(t))),e(this,Ke).addEventListener("blur",(t=>this.validatePhone(t))),e(this,ii).addEventListener("input",(t=>this.validatePostalCode(t,e(this,ni).value))),e(this,ii).addEventListener("blur",(t=>this.validatePostalCode(t,e(this,ni).value))),e(this,ni).addEventListener("input",(()=>this.handleCountryChange())),e(this,ri).addEventListener("input",(()=>this.dispatchEvent(new CustomEvent("state-changed")))),e(this,Ge).forEach((t=>{t.addEventListener("input",(()=>this.handleFilled()))})),e(this,Re).addEventListener("submit",(t=>(t.preventDefault(),!e(this,li).isMounted||e(this,li).isMounted&&!e(this,li).value?w(b({en:"Please select a shipping method",fr:"Veuillez sélectionner une méthode d'expédition"})):this.dispatchEvent(new CustomEvent("form-submit",{detail:new Qe({...this.processFormData(),paymentMethod:t.submitter.value})})))))}titleCase(t){if(" "===t.data||"deleteContentBackward"===t.inputType)return;const e=t.target.value.split(" ").filter(Boolean).map(N);t.target.value=e.join(" ")}handleFilled(){this.isFilled&&e(this,Ze)||(this.isFilled&&!e(this,Ze)?(i(this,Ze,!0),this.dispatchEvent(new CustomEvent("form-filled",{detail:new Qe(this.processFormData())}))):(i(this,Ze,!1),this.dispatchEvent(new CustomEvent("form-not-filled"))))}get isFilled(){for(const t of e(this,Ge))if(!t.checkValidity())return!1;return!0}processFormData(){return[...new FormData(e(this,Re)).entries()].reduce(((t,[i,s])=>i.startsWith("address-")?{...t,address:{...t.address,[i.replace("address-","")]:s.trim()}}:i.startsWith("shipping")?{...t,shipping:e(this,li).value}:{...t,[i]:s.trim()}),{address:{}})}populateSelects(t,e=[],i){t.textContent="",e.forEach(((e,s)=>{t.appendChild(new m("option",null,{value:i(e),selected:0===s}).addChild(i(e)).render())}))}handleCountryChange(t=e(this,ni).value){return requestAnimationFrame((()=>{e(this,ri).textContent="",e(this,ii).value="",this.populateSelects(e(this,ri),p.countries[t].states,(t=>t.name)),e(this,oi).textContent=b(Ve[t])[0],e(this,si).textContent=b(Ve[t])[1],e(this,ii).setAttribute("pattern","Canada"===t?Fe.source:Ye.source),e(this,ii).setAttribute("maxlength","Canada"===t?"7":"10"),e(this,ii).setAttribute("size","Canada"===t?"7":"10"),this.dispatchEvent(new CustomEvent("country-changed")),this.handleFilled()}))}}function ci(){let t=!1;return{async loadScript({src:e,type:i="text/javascript",async:s=!0}){return t?await Promise.resolve({ok:!0,loaded:t}):await new Promise(((a,n)=>{this.scriptElement=new m("script",null,{src:e,async:s,type:i}).render(),document.head.appendChild(this.scriptElement),this.scriptElement.addEventListener("load",(()=>{a({ok:!0,loaded:t}),t=!0})),this.scriptElement.addEventListener("error",(()=>n({error:`Error loading script from ${e}`})))})).catch((t=>w(`Script loading failed: ${t}`)))}}}Object.assign(di.prototype,function(){const t=t=>/^[0-9]+$/.test(t),e=t=>t.substring(0,3)+" "+t.substring(3,6)+" "+t.substring(6);return{validatePhone(i){const{target:s,inputType:a,data:n}=i;if("insertText"!==a||t(n)){if("deleteContentBackward"!==a)switch(s.value.length){case 3:s.value=s.value+" ";break;case 4:s.value=s.value.endsWith(" ")?s.value:s.value.substring(0,3)+" "+s.value[3];break;case 7:s.value=s.value+" ";break;case 8:s.value=s.value.endsWith(" ")?s.value:s.value.substring(0,7)+" "+s.value[7];break;case 10:t(s.value)&&(s.value=e(s.value));break;case 11:t(s.value)&&(s.value=e(s.value.substring(1)))}}else s.value=s.value.substring(0,s.value.length-1)}}}(),function(){const t=/^[A-Za-z][0-9][A-Za-z] ?[0-9][A-Za-z][0-9]$/,e=t=>/^[0-9]+$/.test(t),i=t=>t.substring(0,t.length-1),s=t=>{return((i=(i=t).replace(" ","")).length%2?(t=>/^[A-Za-z]+$/.test(t))(i[i.length-1]):e(i[i.length-1]))?t:t.substring(0,t.length-1);var i};return{validatePostalCode(a,n){const{target:r,inputType:o}=a;if("deleteContentBackward"!==o)if("Canada"===n)switch(r.value=r.value.toUpperCase(),r.value.length){case 1:case 2:r.value=s(r.value);break;case 3:r.value=s(r.value),r.value=3===r.value.length?r.value+" ":r.value;break;case 4:case 5:case 6:r.value=s(r.value),r.value=6===r.value.length&&t.test(r.value)?r.value.substring(0,3)+" "+r.value.substring(3,6):r.value;break;case 7:r.value=s(r.value)}else if("United States"===n)switch(r.value.length){case 1:case 2:case 3:case 4:case 5:r.value=e(r.value)?r.value:i(r.value);break;case 6:r.value=r.value.endsWith("-")?r.value:i(r.value);break;case 7:case 8:case 9:r.value=e(r.value)&&!r.value.includes("-")?r.value.substring(0,5)+"-"+r.value.substring(5):r.value;case 10:r.value=e(r.value.replace("-",""))?r.value:i(r.value)}}}}()),customElements.get("zircus-checkout-form")||customElements.define("zircus-checkout-form",di);class hi extends Error{constructor(t){super(t)}}class ui extends Error{constructor(t){super(t)}}function pi(t){return{createPaymentIntent:async({orderData:e})=>await fetch(`${t}/create-payment-intent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(k).then(A).then((({orderData:t,clientSecret:e})=>(p.secret=e,p.order=new Qe(t),p.order))).catch((t=>{throw p.order=null,w(b({en:`Error creating payment intent: ${t}`,fr:`Erreur de création de l'intention de paiement ${t}`})),new hi(t)})),async cancelPaymentIntent(){await fetch(`${t}/cancel-payment-intent/${p.order.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientSecret:p.secret,orderId:p.order.orderId})}).then(k).then(A).then((()=>{p.order=null,M(b({en:"Cancelled payment intent",fr:"Intention de paiement annulée"}))})).catch((t=>{throw w(b({en:`Unable to cancel Payment Intent: ${t.substring(0,24)}`,fr:`Impossible d'annuler l'intention de paiement: ${t.substring(0,24)}`})),new ui(t)}))}}}const mi=`${r}/stripe/`;let gi=null;const vi={base:{color:"#211b22",fontFamily:"Nunito, sans-serif",fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#8b808f"}},invalid:{fontFamily:"Nunito, sans-serif",color:"#8f3342",iconColor:"#8f3342"}};var Mi=new WeakMap,wi=new WeakMap,yi=new WeakMap,bi=new WeakMap,Ei=new WeakMap,fi=new WeakMap,ki=new WeakMap,Ai=new WeakMap;class Ii extends HTMLElement{constructor(...t){super(...t),Mi.set(this,{writable:!0,value:!1}),wi.set(this,{writable:!0,value:void 0}),yi.set(this,{writable:!0,value:void 0}),bi.set(this,{writable:!0,value:void 0}),Ei.set(this,{writable:!0,value:void 0}),fi.set(this,{writable:!0,value:void 0}),ki.set(this,{writable:!0,value:void 0}),Ai.set(this,{writable:!0,value:void 0})}connectedCallback(){this.classList.add("stripe-payment-form"),i(this,yi,this.createInitialElements()),i(this,bi,document.querySelector("zircus-checkout-form")),i(this,Ai,e(this,bi).querySelector("#pay-with-card")),e(this,bi).addEventListener("form-submit",(t=>{"stripe"===t.detail.paymentMethod&&(gi?this.showModal().createPaymentIntent({orderData:t.detail}).then((()=>this.mountStripe())):w("Stripe not yet loaded!"))})),e(this,bi).addEventListener("form-filled",(()=>e(this,Ai).disabled=!1)),e(this,bi).addEventListener("form-not-filled",(()=>e(this,Ai).disabled=!0)),this.scriptLoaded||this.loadScript({src:"https://js.stripe.com/v3/",id:"stripe-script"}).then((t=>{t.ok&&!t.loaded&&(gi=Stripe("pk_test_51J93KzDIzwSFHzdzCZtyRcjMvw8em0bhnMrVmkBHaMFHuc2nkJ156oJGNxuz0G7W4Jx0R6OCy2nBXYTt6U8bSYew00PIAPcntP"))})).catch((t=>w(`Error loading Stripe: ${t}`)))}disconnectedCallback(){i(this,Mi,!1),e(this,ki).classList.add("hidden")}get scriptLoaded(){return!!document.getElementById("stripe-script")&&gi}showModal(){return $.show({content:e(this,yi),heading:this.getAttribute("heading"),ok:{action:()=>this.confirmCardPayment(),text:this.getAttribute("buttontext"),title:this.getAttribute("buttontext")},cancel:{action:()=>{var t;return this.setErrorMessage(),$.close(),null!==(t=p.order)&&void 0!==t&&t.isCompleted&&!vt.length?At.navigate(b({en:"/thanks",fr:"/fr/merci"})):this.cancelPaymentIntent()},text:this.getAttribute("canceltext"),title:this.getAttribute("canceltext")}}),$.setStatus({isActive:!1,isSpinning:!0}),requestAnimationFrame((()=>{e(this,ki).classList.remove("hidden")})),this}setErrorMessage({message:t=null}={}){return t?requestAnimationFrame((()=>{$.setStatus({isActive:!1}),e(this,fi).textContent=t,e(this,fi).classList.remove("hidden"),e(this,fi).classList.add("red")})):requestAnimationFrame((()=>{$.setStatus({isActive:!0}),e(this,fi).classList.add("hidden"),e(this,fi).classList.remove("red")}))}mountStripe(){e(this,Ei).textContent=`Calculated total: ${E(p.order.total)}`,$.setStatus({isActive:!1}),!e(this,Mi)&&this.mountStripeElements()}mountStripeElements(t=gi.elements(),e=t.create("card",{style:vi})){e.mount("#stripe-card-element"),e.on("change",(t=>($.setStatus({isActive:!t.empty}),t.error?this.setErrorMessage({message:t.error.message}):this.setErrorMessage()))),i(this,wi,e),i(this,Mi,!0)}confirmCardPayment(){return $.setStatus({isActive:!1,isSpinning:!0}),gi.confirmCardPayment(p.secret,{payment_method:{card:e(this,wi)}}).then((t=>t.error?this.setErrorMessage(t.error.message):this.handlePaymentSuccess()))}handlePaymentSuccess(){vt.clear(),p.secret=null,p.order.setCompleted(),requestAnimationFrame((()=>{$.setStatus({isActive:!1,isSpinning:!1,cancelText:b({en:"finish",fr:"complétez"}),cancelTitle:b({en:"finish",fr:"complétez"})}),e(this,ki).textContent="",e(this,ki).classList.add("disabled"),e(this,fi).textContent=this.getAttribute("success"),e(this,fi).classList.replace("hidden","green")})),M(this.getAttribute("complete").replace("|",p.order.name))}createInitialElements(t=document.createElement("div")){const e=this.querySelector("template").content.cloneNode(!0);return i(this,Ei,e.querySelector("#stripe-payment-price")),i(this,ki,e.querySelector("#stripe-card-element")),i(this,fi,e.querySelector("#stripe-result-message")),t.appendChild(e),t}}Object.assign(Ii.prototype,ci(),pi(mi)),customElements.get("zircus-stripe")||customElements.define("zircus-stripe",Ii);const zi=`${r}/paypal`,Ci={shape:"rect",color:"black",layout:"horizontal",label:"paypal",height:window.innerWidth<1920?44:window.innerWidth<2160?50:55,tagline:!1};var Li=new WeakMap,Ni=new WeakMap,Si=new WeakMap,xi=new WeakMap,Di=new WeakMap,Ti=new WeakMap,ji=new WeakMap;class _i extends HTMLElement{constructor(...t){super(...t),Li.set(this,{writable:!0,value:void 0}),Ni.set(this,{writable:!0,value:void 0}),Si.set(this,{writable:!0,value:void 0}),xi.set(this,{writable:!0,value:void 0}),Di.set(this,{writable:!0,value:void 0}),Ti.set(this,{writable:!0,value:void 0}),ji.set(this,{writable:!0,value:void 0})}connectedCallback(){this.createInitialElements(),e(this,Li).addEventListener("form-submit",(t=>{"paypal"===t.detail.paymentMethod&&this.handleSubmit(t.detail)})),e(this,Li).addEventListener("form-filled",(()=>e(this,Ni).disabled=!1)),e(this,Li).addEventListener("form-not-filled",(()=>e(this,Ni).disabled=!0)),this.scriptElementAttached?i(this,ji,!0):this.loadPaypalScript().then((t=>{t.ok&&i(this,ji,!0)}))}get scriptElementAttached(){return!!document.getElementById("paypal-script")&&e(this,ji)}handleSubmit(t){return e(this,ji)?this.showModal().mountPayPalButton({orderData:t}):w("PayPal is still loading")}async loadPaypalScript(){return await this.loadScript({src:"https://www.paypal.com/sdk/js?client-id=Aef4eC1Xxfc-wTn_x-wNgMzYB44l7d61xBmi_xB4E_bSFhYjZHsmQudrj8pMB3dn-BxA_cK227PcBzNv&currency=CAD&enable-funding=venmo",id:"paypal-script"})}showModal(){return $.show({content:this.createPayPalModalElements(),heading:this.getAttribute("name"),ok:{text:this.getAttribute("canceltext"),title:this.getAttribute("canceltext"),action:()=>{var t;if($.close(),null!==(t=p.order)&&void 0!==t&&t.isCompleted&&!vt.length)At.navigate(b({en:"/thanks",fr:"/fr/merci"}));else if(p.order)return this.cancelPaymentIntent()}}}),this}mountPayPalButton({orderData:t}){requestAnimationFrame((()=>{e(this,Di).textContent=`Calculated Total: ${E(document.querySelector("zircus-cart-totals").getAttribute("total"))}`,paypal.Buttons({style:Ci,createOrder:async()=>await this.createPaymentIntent({orderData:t}).then((t=>t.orderId)).catch((()=>$.close())),onApprove:(t,e)=>this.onApprove(t,e)}).render("#paypal-button")}))}handlePaymentSuccess(){return M(this.getAttribute("complete").replace("|",p.order.name)),$.setStatus({okText:b({en:"close",fr:"fermer"}),okTitle:b({en:"Close modal and finish order",fr:"Fermez modal et completez votre commande"})}),requestAnimationFrame((()=>{e(this,xi).textContent=this.getAttribute("success"),e(this,xi).classList.add("green"),e(this,Ti).textContent="",e(this,Ti).classList.add("disabled"),vt.clear(),p.order.setCompleted()}))}handlePaymentFailure(){p.order=null,e(this,Di).textContent=this.getAttribute("failure"),e(this,Di).classList.add("red"),w(`Payment failed: ${error}`)}onApprove(t,e){return e.order.capture().then((()=>this.handlePaymentSuccess())).catch((t=>this.handlePaymentFailure(t)))}createPayPalModalElements(t=document.createElement("div")){const s=e(this,Si).content.cloneNode(!0);return i(this,Ti,s.querySelector("#paypal-button")),i(this,xi,s.querySelector("#paypal-text")),i(this,Di,s.querySelector("#paypal-message")),e(this,xi).textContent=b({en:"Please continue payment through PayPal order page:",fr:"Continuez votre order sur le site PayPal:"}),t.appendChild(s),t}createInitialElements(){i(this,Si,this.querySelector("template")),i(this,Li,document.querySelector("zircus-checkout-form")),i(this,Ni,new m("button","paypal-button",{title:this.getAttribute("title"),value:"paypal",name:this.getAttribute("name"),disabled:!0}).addChild(new m("img",null,{src:"\ndata:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAxcHgiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAxMDEgMzIiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaW5ZTWluIG1lZXQiIHhtbG5zPSJodHRwOiYjeDJGOyYjeDJGO3d3dy53My5vcmcmI3gyRjsyMDAwJiN4MkY7c3ZnIj48cGF0aCBmaWxsPSIjZmZmZmZmIiBkPSJNIDEyLjIzNyAyLjggTCA0LjQzNyAyLjggQyAzLjkzNyAyLjggMy40MzcgMy4yIDMuMzM3IDMuNyBMIDAuMjM3IDIzLjcgQyAwLjEzNyAyNC4xIDAuNDM3IDI0LjQgMC44MzcgMjQuNCBMIDQuNTM3IDI0LjQgQyA1LjAzNyAyNC40IDUuNTM3IDI0IDUuNjM3IDIzLjUgTCA2LjQzNyAxOC4xIEMgNi41MzcgMTcuNiA2LjkzNyAxNy4yIDcuNTM3IDE3LjIgTCAxMC4wMzcgMTcuMiBDIDE1LjEzNyAxNy4yIDE4LjEzNyAxNC43IDE4LjkzNyA5LjggQyAxOS4yMzcgNy43IDE4LjkzNyA2IDE3LjkzNyA0LjggQyAxNi44MzcgMy41IDE0LjgzNyAyLjggMTIuMjM3IDIuOCBaIE0gMTMuMTM3IDEwLjEgQyAxMi43MzcgMTIuOSAxMC41MzcgMTIuOSA4LjUzNyAxMi45IEwgNy4zMzcgMTIuOSBMIDguMTM3IDcuNyBDIDguMTM3IDcuNCA4LjQzNyA3LjIgOC43MzcgNy4yIEwgOS4yMzcgNy4yIEMgMTAuNjM3IDcuMiAxMS45MzcgNy4yIDEyLjYzNyA4IEMgMTMuMTM3IDguNCAxMy4zMzcgOS4xIDEzLjEzNyAxMC4xIFoiPjwvcGF0aD48cGF0aCBmaWxsPSIjZmZmZmZmIiBkPSJNIDM1LjQzNyAxMCBMIDMxLjczNyAxMCBDIDMxLjQzNyAxMCAzMS4xMzcgMTAuMiAzMS4xMzcgMTAuNSBMIDMwLjkzNyAxMS41IEwgMzAuNjM3IDExLjEgQyAyOS44MzcgOS45IDI4LjAzNyA5LjUgMjYuMjM3IDkuNSBDIDIyLjEzNyA5LjUgMTguNjM3IDEyLjYgMTcuOTM3IDE3IEMgMTcuNTM3IDE5LjIgMTguMDM3IDIxLjMgMTkuMzM3IDIyLjcgQyAyMC40MzcgMjQgMjIuMTM3IDI0LjYgMjQuMDM3IDI0LjYgQyAyNy4zMzcgMjQuNiAyOS4yMzcgMjIuNSAyOS4yMzcgMjIuNSBMIDI5LjAzNyAyMy41IEMgMjguOTM3IDIzLjkgMjkuMjM3IDI0LjMgMjkuNjM3IDI0LjMgTCAzMy4wMzcgMjQuMyBDIDMzLjUzNyAyNC4zIDM0LjAzNyAyMy45IDM0LjEzNyAyMy40IEwgMzYuMTM3IDEwLjYgQyAzNi4yMzcgMTAuNCAzNS44MzcgMTAgMzUuNDM3IDEwIFogTSAzMC4zMzcgMTcuMiBDIDI5LjkzNyAxOS4zIDI4LjMzNyAyMC44IDI2LjEzNyAyMC44IEMgMjUuMDM3IDIwLjggMjQuMjM3IDIwLjUgMjMuNjM3IDE5LjggQyAyMy4wMzcgMTkuMSAyMi44MzcgMTguMiAyMy4wMzcgMTcuMiBDIDIzLjMzNyAxNS4xIDI1LjEzNyAxMy42IDI3LjIzNyAxMy42IEMgMjguMzM3IDEzLjYgMjkuMTM3IDE0IDI5LjczNyAxNC42IEMgMzAuMjM3IDE1LjMgMzAuNDM3IDE2LjIgMzAuMzM3IDE3LjIgWiI+PC9wYXRoPjxwYXRoIGZpbGw9IiNmZmZmZmYiIGQ9Ik0gNTUuMzM3IDEwIEwgNTEuNjM3IDEwIEMgNTEuMjM3IDEwIDUwLjkzNyAxMC4yIDUwLjczNyAxMC41IEwgNDUuNTM3IDE4LjEgTCA0My4zMzcgMTAuOCBDIDQzLjIzNyAxMC4zIDQyLjczNyAxMCA0Mi4zMzcgMTAgTCAzOC42MzcgMTAgQyAzOC4yMzcgMTAgMzcuODM3IDEwLjQgMzguMDM3IDEwLjkgTCA0Mi4xMzcgMjMgTCAzOC4yMzcgMjguNCBDIDM3LjkzNyAyOC44IDM4LjIzNyAyOS40IDM4LjczNyAyOS40IEwgNDIuNDM3IDI5LjQgQyA0Mi44MzcgMjkuNCA0My4xMzcgMjkuMiA0My4zMzcgMjguOSBMIDU1LjgzNyAxMC45IEMgNTYuMTM3IDEwLjYgNTUuODM3IDEwIDU1LjMzNyAxMCBaIj48L3BhdGg+PHBhdGggZmlsbD0iI2ZmZmZmZiIgZD0iTSA2Ny43MzcgMi44IEwgNTkuOTM3IDIuOCBDIDU5LjQzNyAyLjggNTguOTM3IDMuMiA1OC44MzcgMy43IEwgNTUuNzM3IDIzLjYgQyA1NS42MzcgMjQgNTUuOTM3IDI0LjMgNTYuMzM3IDI0LjMgTCA2MC4zMzcgMjQuMyBDIDYwLjczNyAyNC4zIDYxLjAzNyAyNCA2MS4wMzcgMjMuNyBMIDYxLjkzNyAxOCBDIDYyLjAzNyAxNy41IDYyLjQzNyAxNy4xIDYzLjAzNyAxNy4xIEwgNjUuNTM3IDE3LjEgQyA3MC42MzcgMTcuMSA3My42MzcgMTQuNiA3NC40MzcgOS43IEMgNzQuNzM3IDcuNiA3NC40MzcgNS45IDczLjQzNyA0LjcgQyA3Mi4yMzcgMy41IDcwLjMzNyAyLjggNjcuNzM3IDIuOCBaIE0gNjguNjM3IDEwLjEgQyA2OC4yMzcgMTIuOSA2Ni4wMzcgMTIuOSA2NC4wMzcgMTIuOSBMIDYyLjgzNyAxMi45IEwgNjMuNjM3IDcuNyBDIDYzLjYzNyA3LjQgNjMuOTM3IDcuMiA2NC4yMzcgNy4yIEwgNjQuNzM3IDcuMiBDIDY2LjEzNyA3LjIgNjcuNDM3IDcuMiA2OC4xMzcgOCBDIDY4LjYzNyA4LjQgNjguNzM3IDkuMSA2OC42MzcgMTAuMSBaIj48L3BhdGg+PHBhdGggZmlsbD0iI2ZmZmZmZiIgZD0iTSA5MC45MzcgMTAgTCA4Ny4yMzcgMTAgQyA4Ni45MzcgMTAgODYuNjM3IDEwLjIgODYuNjM3IDEwLjUgTCA4Ni40MzcgMTEuNSBMIDg2LjEzNyAxMS4xIEMgODUuMzM3IDkuOSA4My41MzcgOS41IDgxLjczNyA5LjUgQyA3Ny42MzcgOS41IDc0LjEzNyAxMi42IDczLjQzNyAxNyBDIDczLjAzNyAxOS4yIDczLjUzNyAyMS4zIDc0LjgzNyAyMi43IEMgNzUuOTM3IDI0IDc3LjYzNyAyNC42IDc5LjUzNyAyNC42IEMgODIuODM3IDI0LjYgODQuNzM3IDIyLjUgODQuNzM3IDIyLjUgTCA4NC41MzcgMjMuNSBDIDg0LjQzNyAyMy45IDg0LjczNyAyNC4zIDg1LjEzNyAyNC4zIEwgODguNTM3IDI0LjMgQyA4OS4wMzcgMjQuMyA4OS41MzcgMjMuOSA4OS42MzcgMjMuNCBMIDkxLjYzNyAxMC42IEMgOTEuNjM3IDEwLjQgOTEuMzM3IDEwIDkwLjkzNyAxMCBaIE0gODUuNzM3IDE3LjIgQyA4NS4zMzcgMTkuMyA4My43MzcgMjAuOCA4MS41MzcgMjAuOCBDIDgwLjQzNyAyMC44IDc5LjYzNyAyMC41IDc5LjAzNyAxOS44IEMgNzguNDM3IDE5LjEgNzguMjM3IDE4LjIgNzguNDM3IDE3LjIgQyA3OC43MzcgMTUuMSA4MC41MzcgMTMuNiA4Mi42MzcgMTMuNiBDIDgzLjczNyAxMy42IDg0LjUzNyAxNCA4NS4xMzcgMTQuNiBDIDg1LjczNyAxNS4zIDg1LjkzNyAxNi4yIDg1LjczNyAxNy4yIFoiPjwvcGF0aD48cGF0aCBmaWxsPSIjZmZmZmZmIiBkPSJNIDk1LjMzNyAzLjMgTCA5Mi4xMzcgMjMuNiBDIDkyLjAzNyAyNCA5Mi4zMzcgMjQuMyA5Mi43MzcgMjQuMyBMIDk1LjkzNyAyNC4zIEMgOTYuNDM3IDI0LjMgOTYuOTM3IDIzLjkgOTcuMDM3IDIzLjQgTCAxMDAuMjM3IDMuNSBDIDEwMC4zMzcgMy4xIDEwMC4wMzcgMi44IDk5LjYzNyAyLjggTCA5Ni4wMzcgMi44IEMgOTUuNjM3IDIuOCA5NS40MzcgMyA5NS4zMzcgMy4zIFoiPjwvcGF0aD48L3N2Zz4\n"})).render()),this.appendChild(e(this,Ni))}}Object.assign(_i.prototype,ci(),pi(zi)),customElements.get("zircus-paypal")||customElements.define("zircus-paypal",_i);var Wi=new WeakMap,qi=new WeakMap,Oi=new WeakMap,$i=new WeakMap;class Pi extends HTMLElement{constructor(...t){super(...t),Wi.set(this,{writable:!0,value:void 0}),qi.set(this,{writable:!0,value:void 0}),Oi.set(this,{writable:!0,value:void 0}),$i.set(this,{writable:!0,value:void 0})}connectedCallback(){i(this,$i,!1),i(this,Oi,document.querySelector("zircus-checkout-form")),i(this,Wi,this.querySelector("#checkout-shipping-inputs")),i(this,qi,new m("div","flex-inputs").render()),e(this,qi).innerHTML=Hi.placeholder(),e(this,Wi).appendChild(e(this,qi)),e(this,Oi).addEventListener("form-filled",(async({detail:t})=>{e(this,qi).innerHTML=Hi.spinner,await this.fetchQuotes(t)})),e(this,Oi).addEventListener("form-not-filled",(()=>{e(this,qi).innerHTML=Hi.placeholder(),this.removeAttribute("shipping-price"),this.removeAttribute("shipping-type")}))}get isMounted(){return e(this,$i)}async fetchQuotes(t){await fetch(`${r}/orders/shipping`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(k).then(A).then((t=>{this.render(t),M(b({en:"Shipping methods updated",fr:"Les méthodes d'expédition ont été mises à jour"}))})).catch((t=>w(t)))}render(t){e(this,qi).textContent="",t.forEach(((t,i)=>{const s=new m("span",null).addChild(`${t.serviceName} ${t.serviceStandard.expectedTransitTime?`(${t.serviceStandard.expectedTransitTime} ${b({en:"days",fr:"jours"})})`:""} - ${E(t.priceDetails.due)}`).render(),a=new m("label","row",{for:`shipping-${t.serviceCode}`}).render(),n=new m("input",null,{type:"radio",name:"shipping",value:t.serviceCode,"data-price":t.priceDetails.due,id:`shipping-${t.serviceCode}`}).event("input",(e=>this.inputHandler(e,t.serviceCode))).render();0===i&&(n.setAttribute("checked",!0),this.setAttribute("shipping-type",t.serviceCode),this.setAttribute("shipping-price",t.priceDetails.due)),a.appendChild(n),a.appendChild(s),e(this,qi).appendChild(a)})),e(this,Wi).appendChild(e(this,qi)),i(this,$i,!0),this.dispatchEvent(new CustomEvent("mounted"))}get value(){return{method:this.getAttribute("shipping-type"),total:this.getAttribute("shipping-price")?Number(this.getAttribute("shipping-price")):0}}inputHandler(t,e){t.target.checked&&(this.setAttribute("shipping-type",e),this.setAttribute("shipping-price",t.target.getAttribute("data-price")),this.dispatchEvent(new CustomEvent("method-changed")))}}const Hi={spinner:"<zircus-spinner></zircus-spinner>",placeholder:()=>`<span class="shipping__placeholder">(${b({en:"shipping options will load once form is filled",fr:"les options d'expédition se chargeront une fois le formulaire rempli"})})</span>`};customElements.get("zircus-shipping-inputs")||customElements.define("zircus-shipping-inputs",Pi);class Bi extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=Ui.render()}}const Ui={render(){return`${this.html()}${this.css()}`},html:()=>'<div class="lds-ellipsis gray">\n  <div></div>\n  <div></div>\n  <div></div>\n  <div></div>\n</div>',css:()=>"<style>\n:host {\n  margin: 0 auto;\n}\n.lds-ellipsis {\n  display: inline-block;\n  position: relative;\n  width: 40px;\n  height: 40px;\n}\n.lds-ellipsis.gray div {\n  background: var(--gray-50);\n}\n.lds-ellipsis div {\n  position: absolute;\n  top: 16.5px;\n  width: var(--base-unit);\n  height: var(--base-unit);\n  border-radius: 50%;\n  background: #fff;\n  animation-timing-function: cubic-bezier(0, 1, 1, 0);\n}\n.lds-ellipsis div:nth-child(1) {\n  left: 4px;\n  animation: lds-ellipsis1 0.6s infinite;\n}\n.lds-ellipsis div:nth-child(2) {\n  left: 4px;\n  animation: lds-ellipsis2 0.6s infinite;\n}\n.lds-ellipsis div:nth-child(3) {\n  left: 16px;\n  animation: lds-ellipsis2 0.6s infinite;\n}\n.lds-ellipsis div:nth-child(4) {\n  left: 28px;\n  animation: lds-ellipsis3 0.6s infinite;\n}\n@keyframes lds-ellipsis1 {\n  0% {\n    transform: scale(0);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n@keyframes lds-ellipsis3 {\n  0% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(0);\n  }\n}\n@keyframes lds-ellipsis2 {\n  0% {\n    transform: translate(0, 0);\n  }\n  100% {\n    transform: translate(12px, 0);\n  }\n}\n</style>"};customElements.get("zircus-spinner")||customElements.define("zircus-spinner",Bi);const Qi=(()=>{const t={};return(e,i)=>{if(t[i])return;t[i]=!0;g([...e.children].flatMap((t=>function(t,e){return["a-400.png","b-400.png","a-1920.jpg"].map((i=>`/assets/img/products/masked/${t}-${e}-${i}`))}(i,t.value))))}})();var Fi=new WeakMap,Yi=new WeakMap,Vi=new WeakMap,Zi=new WeakMap;class Ri extends HTMLElement{constructor(...t){super(...t),Fi.set(this,{writable:!0,value:void 0}),Yi.set(this,{writable:!0,value:void 0}),Vi.set(this,{writable:!0,value:void 0}),Zi.set(this,{writable:!0,value:void 0})}connectedCallback(){i(this,Yi,this.querySelector("#product-size")),i(this,Vi,this.querySelector("#product-quantity")),i(this,Zi,this.querySelector("#product-color")),this.cartLink=this.querySelector("#go-to-cart"),Qi(e(this,Zi),this.prefix);const t=new URLSearchParams(document.location.search);t.get("color")?e(this,Zi).value=t.get("color"):e(this,Zi).value=this.getAttribute("defaultcolor"),t.get("size")&&(e(this,Yi).value=t.get("size")),this.updateStatus({price:!0,status:!0}).updateColorOptionText().updateSizeOptionText().updateCartLink(),e(this,Zi).addEventListener("change",(()=>this.updateStatus({images:!0,status:!0}).updateSizeOptionText())),e(this,Vi).addEventListener("change",(()=>{e(this,Vi).value=Math.min(this.quantity,this.currentItem.quantity),this.wantsUpdate({price:!0})})),e(this,Vi).addEventListener("blur",(()=>{e(this,Vi).value=new L(1,this.currentItem.quantity).normalize(this.quantity),this.wantsUpdate({price:!0})})),e(this,Yi).addEventListener("change",(()=>this.updateStatus({status:!0}).updateColorOptionText())),l.addEventListener(st.INV_UPDATED_EVENT,(()=>this.updateStatus({status:!0}))),l.addEventListener(vt.CART_UPDATED_EVENT,(()=>this.updateCartLink()))}wantsUpdate({images:t=!1,status:e=!1,price:i=!1}){this.dispatchEvent(new CustomEvent("wants-update",{detail:{images:t,status:e,price:i}}))}get color(){return e(this,Zi).value}get quantity(){return Number(e(this,Vi).value)}get prefix(){return this.getAttribute("prefix")}get size(){return e(this,Yi).value}get currentItem(){return e(this,Fi)&&this.color===e(this,Fi).color&&this.size===e(this,Fi).size?e(this,Fi):i(this,Fi,st.find(`${this.prefix}-${this.color}-${e(this,Yi).value}`))}updateOptionText({input:t,test:e,alt:i}){return requestAnimationFrame((()=>[...t.children].forEach((t=>{var s;t.textContent=`${t.textContent.split(" - ")[0]} - (${i} ${(null===(s=st.find(e(t)))||void 0===s?void 0:s.quantity)>0?this.getAttribute("instock").toLowerCase():this.getAttribute("outstock").toLowerCase()})`})))),this}updateSizeOptionText(){return this.updateOptionText({input:e(this,Yi),alt:this.color,test:t=>`${this.prefix}-${this.color}-${t.value}`})}updateColorOptionText(){return this.updateOptionText({input:e(this,Zi),alt:e(this,Yi).value,test:t=>`${this.prefix}-${t.value}-${e(this,Yi).value}`})}updateStatus({images:t,status:i,price:s}){return st.length?(requestAnimationFrame((()=>{e(this,Vi).disabled=!this.currentItem||this.currentItem.quantity<=0,e(this,Vi).value=new L(1,this.currentItem.quantity).normalize(this.quantity),this.wantsUpdate({images:t,status:i,price:s})})),this):this}}Object.assign(Ri.prototype,Vt()),customElements.get("zircus-product")||customElements.define("zircus-product",Ri);var Gi=new WeakMap,Ji=new WeakMap,Ki=new WeakMap,Xi=new WeakMap,ts=new WeakMap;class es extends HTMLElement{constructor(...t){super(...t),Gi.set(this,{writable:!0,value:void 0}),Ji.set(this,{writable:!0,value:!1}),Ki.set(this,{writable:!0,value:!1}),Xi.set(this,{writable:!0,value:void 0}),ts.set(this,{writable:!0,value:void 0})}connectedCallback(){i(this,ts,document.querySelector("zircus-product")),i(this,Gi,new m("img","product__img").render()),i(this,Xi,document.createElement("zircus-full-image")),v(e(this,Xi),{alt:this.getAttribute("alt"),title:this.getAttribute("fulltitle"),src:this.images.lg_a,hidden:!0}),v(e(this,Gi),{alt:this.getAttribute("alt"),src:this.images.sm_a,title:`${this.getAttribute("title")} (${this.getAttribute("viewfull")})`}),this.appendChild(e(this,Gi)),this.appendChild(e(this,Xi)),e(this,ts).addEventListener("wants-update",(({detail:t})=>t.images&&this.handleUpdate())),e(this,Xi).addEventListener("click",(()=>e(this,Xi).hidden=!0)),e(this,Gi).addEventListener("pointerenter",(()=>!e(this,Ki)&&(this.isHovered=!0))),e(this,Gi).addEventListener("pointerleave",(()=>!e(this,Ki)&&(this.isHovered=!1))),e(this,Gi).addEventListener("click",(()=>e(this,Xi).hidden=!1))}handleUpdate(){e(this,Xi).src=this.images.lg_a,e(this,Gi).src=this.images.sm_a}get images(){return e(this,ts).currentItem.images}set isHovered(t){i(this,Ji,t),requestAnimationFrame((()=>{e(this,Ji)?e(this,Gi).src=this.images.sm_b:e(this,Gi).src=this.images.sm_a,i(this,Ki,!1)}))}get isHovered(){return e(this,Ji)}}customElements.get("zircus-product-image")||customElements.define("zircus-product-image",es);var is=new WeakMap,ss=new WeakMap;class as extends HTMLElement{constructor(...t){super(...t),is.set(this,{writable:!0,value:void 0}),ss.set(this,{writable:!0,value:void 0})}connectedCallback(){i(this,is,new m("img","product__full__img").render()),this.appendChild(e(this,is)),e(this,is).src=this.getAttribute("src"),e(this,is).alt=this.getAttribute("alt"),e(this,is).title=this.getAttribute("title"),this.classList.add("full")}set hidden(t){i(this,ss,t),e(this,ss)?this.hide():this.show()}set src(t){e(this,is).src=t}show(){this.style.display="flex",document.getElementById("nav").classList.add("hidden"),document.getElementById("menu-mobile-btn").classList.add("hidden"),document.body.classList.add("hide-y")}hide(){this.style.display="none",document.getElementById("nav").classList.remove("hidden"),document.getElementById("menu-mobile-btn").classList.remove("hidden"),document.body.classList.remove("hide-y")}}customElements.get("zircus-full-image")||customElements.define("zircus-full-image",as);var ns=new WeakMap,rs=new WeakMap;class os extends HTMLElement{constructor(...t){super(...t),ns.set(this,{writable:!0,value:void 0}),rs.set(this,{writable:!0,value:void 0})}connectedCallback(){i(this,ns,new m("button",["btn","btn__primary"],{type:"button",title:this.getAttribute("title"),"aria-label":this.getAttribute("aria-label")}).render()),this.appendChild(e(this,ns)),i(this,rs,document.querySelector("zircus-product")),e(this,rs).addEventListener("wants-update",(({detail:t})=>t.status&&this.handleUpdate())),e(this,ns).addEventListener("click",(()=>this.handleAddToCart()))}get item(){return e(this,rs).currentItem}enoughStock(t=0){return this.item.quantity&&this.item.quantity>=e(this,rs).quantity+t}handleAddToCart(){if(!this.enoughStock())return w(this.getAttribute("erroradd"));const t=vt.find(this.item.type);return t?this.updateCartItem(t):(vt.add(this.item.type,e(this,rs).quantity),this.notifySuccess())}updateCartItem(t){return this.enoughStock(t.quantity)?(vt.update(this.item.type,(t=>t.setQuantity(t.quantity+e(this,rs).quantity))),this.notifySuccess()):w(this.getAttribute("erroradd"))}notifySuccess(){return M([new m("img","notification__image",{src:this.item.images.sm_a,alt:this.item.name}).render(),new m("zircus-router-link").addChild(new m("a","notification__text",{href:this.getAttribute("carthref"),title:this.getAttribute("carttitle")}).addChild(this.getAttribute("successadd").replace("|",b(this.item.name)))).render()])}handleUpdate(){e(this,ns).disabled=this.item.quantity<=0,e(this,ns).textContent=this.item.quantity<=0?this.getAttribute("outstock").toLowerCase():this.getAttribute("addcarttext").toLowerCase()}}customElements.get("zircus-add-to-cart-button")||customElements.define("zircus-add-to-cart-button",os);var ls=new WeakMap,ds=new WeakMap,cs=new WeakMap;class hs extends HTMLElement{constructor(...t){super(...t),ls.set(this,{writable:!0,value:void 0}),ds.set(this,{writable:!0,value:void 0}),cs.set(this,{writable:!0,value:void 0})}connectedCallback(){i(this,ls,document.querySelector("zircus-product")),i(this,ds,document.createElement("span")),i(this,cs,new m("p","product__inputs_stock").render()),this.appendChild(e(this,ds)),this.appendChild(e(this,cs)),this.classList.add("product__price"),e(this,ls).addEventListener("wants-update",(({detail:t})=>{t.price&&this.setPrice(),t.status&&this.setStatus()}))}get price(){return e(this,ls).currentItem.price}get productQuantity(){return e(this,ls).currentItem.quantity}get quantity(){return e(this,ls).quantity}setPrice(){requestAnimationFrame((()=>{e(this,ds).textContent=E(this.price*this.quantity)}))}setStatus(){requestAnimationFrame((()=>{e(this,cs).textContent=this.productQuantity<=0?this.getAttribute("outstock"):this.productQuantity<5?this.getAttribute("fewleft").replace("|",this.productQuantity):this.getAttribute("instock")}))}}customElements.get("zircus-product-price-text")||customElements.define("zircus-product-price-text",hs);var us=new WeakMap,ps=new WeakMap,ms=new WeakMap;class gs extends HTMLElement{constructor(){super(),us.set(this,{writable:!0,value:void 0}),ps.set(this,{writable:!0,value:void 0}),ms.set(this,{writable:!0,value:void 0}),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=vs.render(),i(this,ps,vs.mapDOM(this.shadowRoot))}connectedCallback(){i(this,us,document.querySelector("zircus-product")),this.handleUpdate(),e(this,us).addEventListener("wants-update",(({detail:t})=>t.images&&this.handleUpdate()))}get color(){return e(this,us).color}handleUpdate(){e(this,ms)?e(this,ps).accent.classList.replace(e(this,ms),this.color):e(this,ps).accent.classList.add(this.color),i(this,ms,this.color)}}const vs={html:()=>'\n  <div id="accent"></div>\n  ',css:()=>"<style>\n:host { position: relative; z-index: -1; width: 100%; }\n#accent.black { background: var(--dark); }\n#accent.teal { background: var(--teal); }\n#accent.yellow { background: var(--gold); }\n#accent.purple { background: var(--purple); }\n#accent.stripe {\n  border: 2px solid var(--dark);\n  background-image: repeating-linear-gradient(\n    45deg,\n    var(--dark),\n    var(--dark) 3rem,\n    var(--light) 3rem,\n    var(--light) 6rem\n  );\n}\n#accent {\n  z-index: -1;\n  top: 2rem;\n  left: -12rem;\n  width: 35rem;\n  height: 35rem;\n  border-radius: 100%;\n  position: absolute;\n}\n@media screen and (min-width: 601px) {\n  #accent { display: block; }\n}\n@media screen and (min-width: 901px) {\n  #accent { top: -6rem; right: -12rem; left: unset; }\n}\n@media screen and (min-width: 1281px) {\n  #accent { width: 40rem; height: 40rem; }\n}\n@media screen and (min-width: 1921px) {\n  #accent { top: -12rem; right: -12rem; width: 45rem; height: 45rem; }\n}\n</style>",render(){return`${this.html()}${this.css()}`},mapDOM:t=>({accent:t.querySelector("#accent")})};customElements.get("zircus-product-accent")||customElements.define("zircus-product-accent",gs);var Ms=new WeakMap,ws=new WeakMap,ys=new WeakMap;class bs extends HTMLElement{constructor(){super(),Ms.set(this,{writable:!0,value:void 0}),ws.set(this,{writable:!0,value:!1}),ys.set(this,{writable:!0,value:void 0}),i(this,ys,(()=>window.location.href.includes(e(this,Ms).href)))}connectedCallback(){i(this,Ms,this.querySelector("a")),l.dispatchEvent(new CustomEvent("preload-mounted",{detail:e(this,Ms).href})),e(this,Ms).addEventListener("click",(t=>this.clicked(t))),l.addEventListener(At.NAVIGATED_EVENT,(()=>this.setStatus())),this.setStatus()}disconnectedCallback(){e(this,Ms).removeEventListener("click",(t=>this.clicked(t)))}set isActive(t){i(this,ws,t),e(this,ws)?e(this,Ms).classList.add("active"):e(this,Ms).classList.remove("active")}get isActive(){return e(this,ws)}set active(t){i(this,ys,t)}get active(){return e(this,ys)}setStatus(){e(this,ys).call(this)?this.isActive=!0:this.isActive=!1}clicked(t){t.preventDefault(),At.navigate(e(this,Ms).href)}}customElements.get("zircus-router-link")||customElements.define("zircus-router-link",bs);var Es=new WeakMap;class fs extends HTMLElement{constructor(...t){super(...t),Es.set(this,{writable:!0,value:void 0})}connectedCallback(){i(this,Es,new m("a",null,{href:`#${this.getAttribute("href")}`,title:this.getAttribute("title")}).addChild(this.getAttribute("text")).render()),this.appendChild(e(this,Es)),e(this,Es).addEventListener("click",(t=>this.clicked(t)))}disconnectedCallback(){e(this,Es).removeEventListener("click",(t=>this.clicked(t)))}clicked(t){t.preventDefault();const e=document.getElementById(this.getAttribute("href"));e.scrollIntoView({block:"center",behavior:"smooth"}),requestAnimationFrame((()=>{e.classList.add("scrolled"),document.addEventListener("scroll",(()=>e.classList.remove("scrolled")),{once:!0})}))}}customElements.get("zircus-router-page-link")||customElements.define("zircus-router-page-link",fs);const ks=(()=>{let t=!1;return e=>{t||(t=!0,g(e))}})();var As=new WeakMap,Is=new WeakMap,zs=new WeakMap,Cs=new WeakMap,Ls=new WeakMap;class Ns extends HTMLElement{constructor(...t){super(...t),As.set(this,{writable:!0,value:void 0}),Is.set(this,{writable:!0,value:void 0}),zs.set(this,{writable:!0,value:void 0}),Cs.set(this,{writable:!0,value:1}),Ls.set(this,{writable:!0,value:void 0})}connectedCallback(){i(this,As,new Array(Number(this.getAttribute("num-images"))).fill("").map(((t,e)=>`${this.getAttribute("image-path")}${e+1}.jpg`))),ks(e(this,As)),i(this,Is,new m("img","hero__image",{src:this.src}).render()),i(this,zs,new m("div","hero__container").addChild(new m("div",["bg-light","hero__rounded"])).render()),e(this,zs).appendChild(e(this,Is)),this.appendChild(e(this,zs)),this.classList.add("hero"),i(this,Ls,setInterval((()=>{e(this,Is).src=this.src}),4500))}disconnectedCallback(){clearInterval(e(this,Ls))}attributeChangedCallback(t,i,s){switch(t){case"alt":return e(this,Is)&&(e(this,Is).alt=alt);case"title":return e(this,Is)&&e(this,Is).setAttribute("title",s)}}get currentImage(){var t;return e(this,Cs)===e(this,As).length?i(this,Cs,1):(i(this,Cs,1+(t=+e(this,Cs))),t)}get src(){return`${this.getAttribute("image-path")}${this.currentImage}.jpg`}}customElements.get("zircus-hero-image")||customElements.define("zircus-hero-image",Ns);class Ss extends HTMLElement{connectedCallback(){this.classList.add("tagline"),this.appendChild(new m("h1","tagline__heading").addChild(new m("span").addChild(this.getAttribute("taglines").split("|")[Math.floor(Math.random()*this.getAttribute("taglines").split("|").length)])).addChild(new m("span","teal").addChild(".")).render())}}customElements.get("zircus-tag-line")||customElements.define("zircus-tag-line",Ss);const xs={en:t=>`\n<p>Thanks, ${t.name}! Your order has been recieved and you should get a confirmation \nemail sent to <kbd>${t.email}</kbd> within a few minutes with your \norder information.</p>\n\n<p>Important order information:</p>\n<ul>\n  <li>Your unique three-word identifier is <kbd>${t.identifier}</kbd>\n  (save this, because you'll need it to view your order status)</li>\n  <li>Your order ID is <kbd>${t.orderId}</kbd></li>\n</ul>\n\n<p>Once your order ships, you will recieve a tracking number, along with a \nlink to view the status of your order. For customer support, or if you have any \nquestions, please contact us at <a href="mailto:support@zircus.ca">support@zircus.ca</a>.</p>\n`,fr:t=>`\n<p>Merci, ${t.name}! Votre commande a été reçue et vous\ndevrait obtenir un courriel de confirmation (envoyé à <kbd>${t.email}</kbd>)\ndans quelques minutes avec vos informations de commande.</p>\n\n<p>Information important:</p>\n<ul>\n  <li>Votre identifiant unique de commande est <kbd>${t.identifier}</kbd>.</li>\n  <li>Votre order ID est <kbd>${t.orderId}</li>\n</ul>\n\n<p>Une fois votre commande expédiée, vous recevrez un numéro de suivi, ainsi qu'un lien \npour voir l'état de votre commande. Dans le cas des soutien à la clientèle, ou si vous \navez des questions, veuillez nous contacter à <a href="mailto:support@zircus.ca">\nsupport@zircus.ca</a>.</p>\n`};var Ds=new WeakMap;class Ts extends HTMLElement{constructor(...t){super(...t),Ds.set(this,{writable:!0,value:void 0})}connectedCallback(){const{order:t}=p;!t&&At.navigate(b({en:"/",fr:"/fr"})),i(this,Ds,new m("div").render()),e(this,Ds).innerHTML=b(xs)(t),this.appendChild(e(this,Ds))}}customElements.get("zircus-thanks")||customElements.define("zircus-thanks",Ts);const{contactText:js}=xt;var _s=new WeakMap,Ws=new WeakMap;class qs extends HTMLElement{constructor(...t){super(...t),_s.set(this,{writable:!0,value:void 0}),Ws.set(this,{writable:!0,value:void 0})}connectedCallback(){i(this,_s,this.mapDOM(this)),i(this,Ws,[e(this,_s).contactName,e(this,_s).contactEmail,e(this,_s).contactButton,e(this,_s).contactMessage]),e(this,_s).contactName.addEventListener("input",(t=>{if("deleteContentBackward"===t.inputType||" "===t.data)return;const e=t.target.value.split(" ").map(N);t.target.value=e.join(" ")})),e(this,_s).contactForm.addEventListener("submit",(t=>{t.preventDefault();for(const t of[e(this,_s).contactName,e(this,_s).contactEmail,e(this,_s).contactMessage])if(!t.value.length)return w(this.getAttribute("fields")),t.focus();const i=Object.fromEntries([...new FormData(e(this,_s).contactForm)]);e(this,_s).contactForm.reset(),this.setBusyState(),fetch(`${r}/message`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(k).then(A).then((t=>{this.handleSuccess(t),this.setDoneState()})).catch((t=>{this.setDoneState(),w(t)}))}))}handleFailure(t){return $.show({heading:js[y()].error[0],content:t,ok:{text:js[y()].error[1],title:js[y()].error[0],action:$.close}}),w(`${this.getAttribute("failure")}: ${t.message}`)}handleSuccess(t){return $.show({heading:js[y()].default[0],content:js[y()].message(t.name,t.email),ok:{text:js[y()].default[1],title:js[y()].default[2],action:$.close}}),M(this.getAttribute("success").replace("|",t.name))}setBusyState(){requestAnimationFrame((()=>{e(this,Ws).forEach((t=>{t.disabled=!0})),e(this,_s).contactSpinner.classList.remove("hidden"),e(this,_s).contactButtonText.classList.add("hidden")}))}setDoneState(){requestAnimationFrame((()=>{e(this,Ws).forEach((t=>{t.disabled=!1})),e(this,_s).contactButtonText.classList.remove("hidden"),e(this,_s).contactSpinner.classList.add("hidden")}))}}Object.assign(qs.prototype,{mapDOM(t){const e=t=>t.hasChildNodes()?[t].concat([...t.children].map(e)):t;return e(t).flat(1/0).filter((t=>"function"==typeof t.hasAttribute&&t.hasAttribute("id"))).reduce(((t,e)=>({...t,[e.id]:e})),{})}}),customElements.get("zircus-contact-form")||customElements.define("zircus-contact-form",qs);var Os=new WeakMap,$s=new WeakMap,Ps=new WeakMap;class Hs extends HTMLElement{constructor(...t){super(...t),Os.set(this,{writable:!0,value:void 0}),$s.set(this,{writable:!0,value:void 0}),Ps.set(this,{writable:!0,value:void 0})}connectedCallback(){i(this,Ps,this.querySelector("#order-container")),i(this,Os,Object.fromEntries([...new URLSearchParams(document.location.search)])),e(this,Os).email&&e(this,Os).orderId?this.showModal():this.handleFailure()}handleFailure(){At.navigate(b({en:"/",fr:"/fr"})),$.close(),w(b({en:"Unable to find order",fr:"Impossible de continuer"}))}showModal(){return $.show({heading:this.getAttribute("heading"),content:this.renderModalElements(),cancel:{text:this.getAttribute("canceltext"),title:this.getAttribute("canceltext"),action:this.handleFailure},ok:{text:this.getAttribute("oktext"),title:this.getAttribute("oktext"),action:()=>{$.setStatus({isActive:!1,isSpinning:!0}),this.authenticate({...e(this,Os),identifier:e(this,$s).value}).then(k).then(A).then((t=>{requestAnimationFrame((()=>{p.order=new Qe(t),e(this,Ps).innerHTML=(t=>`\n<article class="order">\n  <p class="order__heading small-spaced-bold">${new Date(t.createdOn).toLocaleDateString()} - ID: ${t.orderId}</p>\n  <ul class="order__products">\n  ${t.items.map((t=>`\n    <li class="order__product">\n      <h5 class="order__product__quantity">${t.quantity}</h5>\n      <img class="order__image" src="${t.image}" alt="${t.name}" title="${t.name}" />\n      <div class="order__product__container">\n        <hp class="order__product__description">${t.name} - $${t.price}/ea.</hp>\n      </div>\n    </li>\n    `)).join("\n")}\n  </ul>\n  <div class="order__details">\n    <h4>${b({en:"Status",fr:"État"})}: ${t.hasShipped?b({en:"shipped",fr:"expédié"}):b({en:"not yet shipped",fr:"pas encore expédié"})}</h4>\n    <address class="order__address">\n<strong>${t.name}</strong><br />\n${t.email}<br />\n${t.phone}<br />\n${t.address.line1}<br>\n${t.address.line2?`${t.address.line2}<br />`:""}\n${t.address.city} ${t.address.state}<br />\n${t.address.country} ${t.address.postalCode}\n    </address>\n    <ul class="order__methods">\n      <li class="order__method">${b({en:"Paid by",fr:"Payé par"})}: ${t.paymentMethod[0].toUpperCase()+t.paymentMethod.substring(1)}</li>\n      <li class="order__method">${b({en:"Shipping",fr:"Expédition"})}: ${t.shipping.method[0].toUpperCase()+t.shipping.method.substring(1)}</li>\n      <li class="order__method"><strong>Total: $${t.total}</strong></li>\n    </ul>\n  </div>\n</article>\n`)(p.order)})),$.close(),M(this.getAttribute("success"))})).catch((t=>{$.setStatus({isActive:!0}),w(t)}))}}})}renderModalElements(t=document.createElement("div")){const e=this.querySelector("template").content.cloneNode(!0);return e.querySelector("span").textContent=this.getAttribute("modaltext"),e.querySelector("label").setAttribute("title",this.getAttribute("label")),i(this,$s,e.querySelector("input")),t.appendChild(e),t}async authenticate(t){return await fetch(`${r}/orders/${t.orderId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}}customElements.get("zircus-order")||customElements.define("zircus-order",Hs);!function(){const t=navigator.language,e=location.pathname.includes(`/${t.split("-")[0]}/`),i=!!localStorage.getItem("notified");!/^fr\b/.test(t)||e||i||((t="en",e=xt.redirect[t])=>{localStorage.setItem("notified",!0),l.dispatchEvent("notification",{detail:{time:8e3,content:[new m("span",["notification__prefix","green"]).addChild("?").render(),new m("zircus-router-link").addChild(new m("a","notification__text",{href:`/${t}`,title:e}).addChild(e)).render()]}})})("fr")}();
